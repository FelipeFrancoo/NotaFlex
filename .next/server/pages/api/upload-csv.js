"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/upload-csv";
exports.ids = ["pages/api/upload-csv"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "papaparse":
/*!****************************!*\
  !*** external "papaparse" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("papaparse");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-csv&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload-csv.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-csv&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload-csv.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_upload_csv_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\upload-csv.ts */ \"(api)/./pages/api/upload-csv.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_upload_csv_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_upload_csv_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_csv_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_csv_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/upload-csv\",\n        pathname: \"/api/upload-csv\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_upload_csv_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwbG9hZC1jc3YmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3VwbG9hZC1jc3YudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDd0Q7QUFDeEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHFEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxxREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub3RhZmxleC1uZXh0anMvPzk2YmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFx1cGxvYWQtY3N2LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXBsb2FkLWNzdlwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwbG9hZC1jc3ZcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-csv&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload-csv.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/upload-csv.ts":
/*!*********************************!*\
  !*** ./pages/api/upload-csv.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var papaparse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! papaparse */ \"papaparse\");\n/* harmony import */ var papaparse__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(papaparse__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_0__]);\nformidable__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Função para parsing de datas CSV (EXATA)\nfunction parseCSVDate(dateStr) {\n    const formats = [\n        /(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})/,\n        /(\\d{4})-(\\d{1,2})-(\\d{1,2})/\n    ];\n    for (const format of formats){\n        const match = dateStr.match(format);\n        if (match) {\n            if (format === formats[0]) {\n                // DD/MM/YYYY - formato brasileiro\n                return new Date(parseInt(match[3]), parseInt(match[2]) - 1, parseInt(match[1]));\n            } else {\n                // YYYY-MM-DD - formato ISO\n                return new Date(parseInt(match[1]), parseInt(match[2]) - 1, parseInt(match[3]));\n            }\n        }\n    }\n    return new Date(dateStr); // Fallback\n}\n// Função auxiliar para semana (EXATA)\nfunction getWeekBoundaries(date) {\n    const dayOfWeek = date.getDay();\n    const weekStart = new Date(date);\n    weekStart.setDate(date.getDate() - dayOfWeek + (dayOfWeek === 0 ? -6 : 1)); // Monday\n    weekStart.setHours(0, 0, 0, 0);\n    const weekEnd = new Date(weekStart);\n    weekEnd.setDate(weekStart.getDate() + 6); // Sunday\n    weekEnd.setHours(23, 59, 59, 999);\n    return {\n        weekStart,\n        weekEnd\n    };\n}\n// Função para parsing de valores monetários\nfunction parseMonetaryValue(str) {\n    let cleanValue = str.replace(/[R$\\s]/g, \"\").replace(/\\./g, \"\").replace(\",\", \".\");\n    const isNegative = cleanValue.startsWith(\"-\");\n    if (isNegative) {\n        cleanValue = cleanValue.substring(1);\n    }\n    const value = parseFloat(cleanValue);\n    return isNegative ? -value : value;\n}\n// Função para detectar encoding\nfunction detectEncoding(buffer) {\n    const encodings = [\n        \"utf-8\",\n        \"latin1\",\n        \"ascii\",\n        \"utf16le\"\n    ];\n    for (const encoding of encodings){\n        try {\n            const decoded = buffer.toString(encoding);\n            // Verificar se contém caracteres especiais brasileiros\n            if (decoded.includes(\"\\xe7\") || decoded.includes(\"\\xe3\") || decoded.includes(\"\\xe9\")) {\n                return encoding;\n            }\n        } catch (error) {\n            continue;\n        }\n    }\n    return \"utf-8\"; // fallback\n}\n// Função para extrair transacionador e documento seguindo especificação EXATA\nfunction extrairTransacionadorEDocumento(csvContent, documentType, nomeFilial) {\n    // Parse CSV sem headers\n    const parseResult = papaparse__WEBPACK_IMPORTED_MODULE_2___default().parse(csvContent, {\n        header: false,\n        skipEmptyLines: true\n    });\n    const rows = parseResult.data;\n    const documentosExtraidos = [];\n    // Processar cada linha do CSV\n    for (const row of rows){\n        // VALIDAÇÃO ESTRUTURAL OBRIGATÓRIA\n        if (!Array.isArray(row) || row.length < 5) continue;\n        const category = row[0]?.toString().trim() || \"\";\n        let dateStr = \"\";\n        let transacionador = \"\";\n        let numeroDocumento = \"\";\n        let valueStr = \"\";\n        // LÓGICA DE IDENTIFICAÇÃO POR TIPO DE DOCUMENTO\n        if (documentType === \"A_PAGAR\") {\n            // Match EXATO - não usar includes()\n            if (category !== \"Contas a pagar- \\xc0 vencer\") continue;\n            // MAPEAMENTO FIXO DAS COLUNAS:\n            dateStr = row[1]?.toString().trim() || \"\"; // COLUNA 1: Data Vencimento\n            transacionador = row[2]?.toString().trim() || \"\"; // COLUNA 2: TRANSACIONADOR\n            numeroDocumento = row[3]?.toString().trim() || \"\"; // COLUNA 3: NÚMERO DO DOCUMENTO\n            valueStr = row[5]?.toString().trim() || \"0\"; // COLUNA 5: Valor (SEMPRE coluna 5)\n        } else if (documentType === \"A_RECEBER\") {\n            // Match EXATO - não usar includes()\n            if (category !== \"Contas a receber - A vencer\") continue;\n            // MAPEAMENTO FIXO DAS COLUNAS:\n            dateStr = row[1]?.toString().trim() || \"\"; // COLUNA 1: Data Vencimento\n            transacionador = row[2]?.toString().trim() || \"\"; // COLUNA 2: TRANSACIONADOR\n            numeroDocumento = row[3]?.toString().trim() || \"\"; // COLUNA 3: NÚMERO DO DOCUMENTO\n            valueStr = row[5]?.toString().trim() || \"0\"; // COLUNA 5: Valor (SEMPRE coluna 5)\n        }\n        // VALIDAÇÕES OBRIGATÓRIAS DOS DADOS EXTRAÍDOS\n        if (!dateStr || !transacionador || !valueStr) continue;\n        // PARSING DA DATA DE VENCIMENTO\n        const date = parseCSVDate(dateStr);\n        if (!date || isNaN(date.getTime())) continue;\n        // PARSING DO VALOR MONETÁRIO (formato brasileiro)\n        let cleanValue = valueStr.replace(/[R$\\s]/g, \"\").replace(/\\./g, \"\").replace(\",\", \".\");\n        const isNegative = cleanValue.startsWith(\"-\");\n        if (isNegative) {\n            cleanValue = cleanValue.substring(1);\n        }\n        const value = parseFloat(cleanValue);\n        if (isNaN(value) || value <= 0) continue;\n        // APLICAÇÃO DE FALLBACKS PARA CAMPOS OBRIGATÓRIOS\n        const transacionadorFinal = transacionador || \"FORNECEDOR N\\xc3O IDENTIFICADO\";\n        const numeroDocumentoFinal = numeroDocumento || \"\"; // Removido fallback 'PENDENTE'\n        // ESTRUTURA FINAL DOS DADOS EXTRAÍDOS\n        const { weekStart, weekEnd } = getWeekBoundaries(date);\n        documentosExtraidos.push({\n            dataVencimento: date,\n            transacionador: transacionadorFinal,\n            numeroDocumento: numeroDocumentoFinal,\n            valor: value,\n            valorOriginal: valueStr,\n            categoria: documentType,\n            filial: nomeFilial,\n            // Dados de compatibilidade\n            weekStart: weekStart,\n            weekEnd: weekEnd,\n            sourceFile: `${nomeFilial}.csv`\n        });\n    }\n    return documentosExtraidos;\n}\n// Configuração para desabilitar o parser padrão do Next.js\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        console.log(\"=== DEBUG UPLOAD CSV ===\");\n        console.log(\"Method:\", req.method);\n        console.log(\"Content-Type:\", req.headers[\"content-type\"]);\n        console.log(\"Headers:\", JSON.stringify(req.headers, null, 2));\n        // Garantir que a pasta temp existe\n        const tempDir = \"./temp\";\n        if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(tempDir)) {\n            fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(tempDir, {\n                recursive: true\n            });\n        }\n        // Configurar formidable para upload de múltiplos arquivos\n        const form = (0,formidable__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            uploadDir: tempDir,\n            keepExtensions: true,\n            maxFiles: 10,\n            maxFileSize: 10 * 1024 * 1024\n        });\n        const [fields, files] = await form.parse(req);\n        console.log(\"=== PARSED DATA ===\");\n        console.log(\"Fields:\", JSON.stringify(fields, null, 2));\n        console.log(\"Files keys:\", Object.keys(files));\n        console.log(\"Files structure:\", JSON.stringify(files, null, 2));\n        // Obter tipos de documento selecionados\n        let selectedTypes = [\n            \"A_PAGAR\",\n            \"A_RECEBER\"\n        ]; // Default\n        if (fields.documentTypes && fields.documentTypes.length > 0) {\n            const documentTypesString = fields.documentTypes[0];\n            console.log(\"documentTypesString recebido:\", documentTypesString);\n            try {\n                // Tentar fazer parse se for JSON\n                const parsed = JSON.parse(documentTypesString);\n                console.log(\"JSON parsed:\", parsed);\n                if (Array.isArray(parsed)) {\n                    selectedTypes = parsed;\n                } else if (typeof parsed === \"object\") {\n                    // Se for um objeto com indices, extrair os valores e flatten\n                    const allTypes = [];\n                    Object.values(parsed).forEach((typeArray)=>{\n                        if (Array.isArray(typeArray)) {\n                            allTypes.push(...typeArray);\n                        }\n                    });\n                    // Remover duplicatas\n                    const uniqueTypes = Array.from(new Set(allTypes));\n                    selectedTypes = uniqueTypes;\n                }\n            } catch (e) {\n                console.log(\"Erro no parse JSON:\", e);\n                // Se não for JSON, usar como array direto\n                selectedTypes = Array.isArray(fields.documentTypes) ? fields.documentTypes : [\n                    documentTypesString\n                ];\n            }\n        }\n        console.log(\"Selected types processados:\", selectedTypes);\n        // NORMALIZAÇÃO ROBUSTA DE ARQUIVOS (multi-field, multi-file)\n        const allFiles = Object.values(files).flat().filter(Boolean);\n        console.log(\"=== FILE PROCESSING ===\");\n        console.log(\"allFiles (normalizado):\", allFiles.map((f)=>({\n                originalFilename: f.originalFilename,\n                path: f.filepath\n            })));\n        console.log(\"allFiles length:\", allFiles.length);\n        // Filtrar apenas arquivos CSV - sendo mais permissivo para debug\n        const csvFiles = allFiles.filter((file)=>{\n            console.log(\"Checking file:\", file ? {\n                originalFilename: file.originalFilename,\n                mimetype: file.mimetype,\n                size: file.size,\n                filepath: file.filepath\n            } : \"null file\");\n            if (!file || !file.originalFilename) return false;\n            // Aceitar .csv ou .txt (alguns sistemas exportam assim), case insensitive\n            return /\\.(csv|txt)$/i.test(file.originalFilename);\n        });\n        console.log(\"=== FILTERING RESULTS ===\");\n        console.log(\"CSV Files found:\", csvFiles.length);\n        console.log(\"Selected types:\", selectedTypes);\n        console.log(\"CSV Files details:\", csvFiles.map((f)=>f ? {\n                name: f.originalFilename,\n                type: f.mimetype,\n                size: f.size\n            } : null));\n        if (csvFiles.length === 0) {\n            console.log(\"=== ERROR: NO FILES ===\");\n            console.log(\"No CSV files found after filtering\");\n            return res.status(400).json({\n                success: false,\n                message: `Nenhum arquivo foi encontrado. Arquivos recebidos: ${allFiles.length}. Verifique se o arquivo é um CSV válido.`\n            });\n        }\n        const allTransactions = [];\n        const allFilesData = [];\n        // Processar cada arquivo CSV\n        for (const file of csvFiles){\n            console.log(`=== PROCESSING FILE: ${file?.originalFilename} ===`);\n            if (!file || !file.filepath) {\n                console.log(\"Skipping invalid file:\", file);\n                continue;\n            }\n            try {\n                console.log(\"File path:\", file.filepath);\n                console.log(\"File exists:\", fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(file.filepath));\n                const buffer = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(file.filepath);\n                const encoding = detectEncoding(buffer);\n                const csvContent = buffer.toString(encoding);\n                // Extrair nome da filial\n                const branchName = (file.originalFilename || \"FILIAL_DESCONHECIDA\").replace(/\\.(csv|txt)$/i, \"\").toUpperCase();\n                const fileTransactions = [];\n                // Processar cada tipo de documento selecionado usando a nova lógica\n                for (const documentType of selectedTypes){\n                    console.log(`Processando tipo de documento: ${documentType} para arquivo: ${file.originalFilename}`);\n                    // Usar a função de extração específica com a lógica correta\n                    const documentosExtraidos = extrairTransacionadorEDocumento(csvContent, documentType, branchName);\n                    console.log(`Documentos extraídos para ${documentType}:`, documentosExtraidos.length);\n                    // Log dos primeiros documentos para debug\n                    if (documentosExtraidos.length > 0) {\n                        console.log(\"Primeiros documentos extra\\xeddos:\", documentosExtraidos.slice(0, 3).map((doc)=>({\n                                transacionador: doc.transacionador,\n                                numeroDocumento: doc.numeroDocumento,\n                                valor: doc.valor,\n                                dataVencimento: doc.dataVencimento.toLocaleDateString(\"pt-BR\")\n                            })));\n                    }\n                    // Converter para o formato TransactionData (manter compatibilidade)\n                    for (const doc of documentosExtraidos){\n                        const transaction = {\n                            date: doc.dataVencimento,\n                            supplier: doc.transacionador,\n                            docNumber: doc.numeroDocumento,\n                            value: doc.valor,\n                            category: documentType === \"A_PAGAR\" ? \"Contas a pagar- \\xc0 vencer\" : \"Contas a receber - A vencer\",\n                            branch: doc.filial,\n                            documentType: doc.categoria,\n                            sourceFile: file.originalFilename || `${branchName}.csv`\n                        };\n                        fileTransactions.push(transaction);\n                        allTransactions.push(transaction);\n                    }\n                }\n                allFilesData.push({\n                    filename: file.originalFilename,\n                    branch: branchName,\n                    transactions: fileTransactions,\n                    totalTransactions: fileTransactions.length\n                });\n                // Limpar arquivo temporário\n                if (file.filepath && fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(file.filepath)) {\n                    fs__WEBPACK_IMPORTED_MODULE_1___default().unlinkSync(file.filepath);\n                }\n            } catch (processFileErr) {\n                console.error(\"Erro ao processar arquivo individual, continuando com os demais:\", file?.originalFilename, processFileErr);\n                continue;\n            }\n        }\n        // Agregação de dados\n        const branchTotalsMap = new Map();\n        const dailyTotalsMap = new Map();\n        let totalPayable = 0;\n        let totalReceivable = 0;\n        let grandTotalValue = 0;\n        // Processar transações para agregação\n        allTransactions.forEach((transaction)=>{\n            const { branch, date, value, documentType } = transaction;\n            // Atualizar totais por filial\n            const { weekStart, weekEnd } = getWeekBoundaries(date);\n            const branchKey = branch;\n            if (!branchTotalsMap.has(branchKey)) {\n                branchTotalsMap.set(branchKey, {\n                    invoiceCount: 0,\n                    totalValue: 0,\n                    weekStart,\n                    weekEnd\n                });\n            }\n            const branchTotal = branchTotalsMap.get(branchKey);\n            branchTotal.invoiceCount++;\n            branchTotal.totalValue += value;\n            // Atualizar totais diários\n            const dateKey = `${branch}-${date.toISOString().split(\"T\")[0]}`;\n            const dayOfWeek = [\n                \"Domingo\",\n                \"Segunda\",\n                \"Ter\\xe7a\",\n                \"Quarta\",\n                \"Quinta\",\n                \"Sexta\",\n                \"S\\xe1bado\"\n            ][date.getDay()];\n            if (!dailyTotalsMap.has(dateKey)) {\n                dailyTotalsMap.set(dateKey, {\n                    date,\n                    dayOfWeek,\n                    totalValue: 0,\n                    invoiceCount: 0,\n                    branch\n                });\n            }\n            const dailyTotal = dailyTotalsMap.get(dateKey);\n            dailyTotal.totalValue += value;\n            dailyTotal.invoiceCount++;\n            // Atualizar totais por tipo\n            if (documentType === \"A_PAGAR\") {\n                totalPayable += value;\n            } else if (documentType === \"A_RECEBER\") {\n                totalReceivable += value;\n            }\n            grandTotalValue += value;\n        });\n        // Converter Maps para arrays\n        const branchTotals = Array.from(branchTotalsMap.entries()).map(([branch, data])=>({\n                branch,\n                invoiceCount: data.invoiceCount,\n                totalValue: `R$ ${data.totalValue.toLocaleString(\"pt-BR\", {\n                    minimumFractionDigits: 2\n                })}`,\n                weekStart: data.weekStart,\n                weekEnd: data.weekEnd\n            }));\n        const dailyTotals = Array.from(dailyTotalsMap.values()).map((data)=>({\n                ...data,\n                totalValue: `R$ ${data.totalValue.toLocaleString(\"pt-BR\", {\n                    minimumFractionDigits: 2\n                })}`\n            }));\n        // Calcular totais semanais\n        const workingDaysTotal = dailyTotals.filter((d)=>![\n                0,\n                6\n            ].includes(d.date.getDay())) // Não domingo/sábado\n        .reduce((sum, d)=>sum + parseMonetaryValue(d.totalValue), 0);\n        const weekendTotal = dailyTotals.filter((d)=>[\n                0,\n                6\n            ].includes(d.date.getDay())) // Domingo/sábado\n        .reduce((sum, d)=>sum + parseMonetaryValue(d.totalValue), 0);\n        const workingDays = dailyTotals.filter((d)=>![\n                0,\n                6\n            ].includes(d.date.getDay())).length;\n        const weekendDays = dailyTotals.filter((d)=>[\n                0,\n                6\n            ].includes(d.date.getDay())).length;\n        const minDate = allTransactions.length > 0 ? new Date(Math.min(...allTransactions.map((t)=>t.date.getTime()))) : new Date();\n        const maxDate = allTransactions.length > 0 ? new Date(Math.max(...allTransactions.map((t)=>t.date.getTime()))) : new Date();\n        const processedData = {\n            branchTotals,\n            dailyTotals,\n            weeklyTotals: {\n                workingDaysTotal: `R$ ${workingDaysTotal.toLocaleString(\"pt-BR\", {\n                    minimumFractionDigits: 2\n                })}`,\n                weekendTotal: `R$ ${weekendTotal.toLocaleString(\"pt-BR\", {\n                    minimumFractionDigits: 2\n                })}`,\n                weekTotal: `R$ ${grandTotalValue.toLocaleString(\"pt-BR\", {\n                    minimumFractionDigits: 2\n                })}`,\n                workingDays,\n                weekendDays,\n                weekPeriod: `${minDate.toLocaleDateString(\"pt-BR\")} - ${maxDate.toLocaleDateString(\"pt-BR\")}`,\n                totalPayable,\n                totalReceivable\n            },\n            grandTotal: `R$ ${grandTotalValue.toLocaleString(\"pt-BR\", {\n                minimumFractionDigits: 2\n            })}`,\n            totalInvoices: allTransactions.length,\n            transactions: allTransactions.map((transaction)=>({\n                    vencimento: transaction.date.toLocaleDateString(\"pt-BR\"),\n                    transacionador: transaction.supplier,\n                    documento: transaction.docNumber,\n                    valor: `R$ ${transaction.value.toLocaleString(\"pt-BR\", {\n                        minimumFractionDigits: 2\n                    })}`,\n                    valorNumerico: transaction.value,\n                    documentType: transaction.documentType,\n                    filial: transaction.branch,\n                    sourceFile: transaction.sourceFile // nome original do arquivo\n                }))\n        };\n        // Cache dos dados processados para exportação posterior sem precisar reenviar pelo frontend\n        try {\n            const cachePath = path__WEBPACK_IMPORTED_MODULE_3___default().join(tempDir, \"last_processed.json\");\n            fs__WEBPACK_IMPORTED_MODULE_1___default().writeFileSync(cachePath, JSON.stringify(processedData, null, 2), \"utf8\");\n        } catch (cacheErr) {\n            console.warn(\"N\\xe3o foi poss\\xedvel salvar cache de processedData:\", cacheErr);\n        }\n        return res.status(200).json({\n            success: true,\n            message: `${csvFiles.length} arquivo(s) processado(s) com sucesso`,\n            data: processedData,\n            allFilesData\n        });\n    } catch (error) {\n        console.error(\"=== ERROR IN UPLOAD-CSV ===\");\n        console.error(\"Error type:\", typeof error);\n        console.error(\"Error message:\", error instanceof Error ? error.message : String(error));\n        console.error(\"Error stack:\", error instanceof Error ? error.stack : \"No stack trace\");\n        console.error(\"Full error object:\", error);\n        res.status(500).json({\n            success: false,\n            message: \"Erro interno do servidor: \" + (error instanceof Error ? error.message : String(error))\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZDBDLFFBQVExQyxLQUFLLENBQUM7UUFDZDBDLFFBQVExQyxLQUFLLENBQUMsZUFBZSxPQUFPQTtRQUNwQzBDLFFBQVExQyxLQUFLLENBQUMsa0JBQWtCQSxpQkFBaUIySixRQUFRM0osTUFBTXlDLE9BQU8sR0FBR21ILE9BQU81SjtRQUNoRjBDLFFBQVExQyxLQUFLLENBQUMsZ0JBQWdCQSxpQkFBaUIySixRQUFRM0osTUFBTTZKLEtBQUssR0FBRztRQUNyRW5ILFFBQVExQyxLQUFLLENBQUMsc0JBQXNCQTtRQUVwQ3FDLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDbkIrQyxTQUFTO1lBQ1Q5QyxTQUFTLCtCQUFnQ3pDLENBQUFBLGlCQUFpQjJKLFFBQVEzSixNQUFNeUMsT0FBTyxHQUFHbUgsT0FBTzVKLE1BQUs7UUFDaEc7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbm90YWZsZXgtbmV4dGpzLy4vcGFnZXMvYXBpL3VwbG9hZC1jc3YudHM/NmRkMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0J1xyXG5pbXBvcnQgZm9ybWlkYWJsZSBmcm9tICdmb3JtaWRhYmxlJ1xyXG5pbXBvcnQgZnMgZnJvbSAnZnMnXHJcbmltcG9ydCBQYXBhIGZyb20gJ3BhcGFwYXJzZSdcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcclxuXHJcbi8vIEludGVyZmFjZXMgcGFyYSB0aXBvcyBkZSBkYWRvcyBwcm9jZXNzYWRvc1xyXG5pbnRlcmZhY2UgUHJvY2Vzc2VkRGF0YSB7XHJcbiAgYnJhbmNoVG90YWxzOiBBcnJheTx7XHJcbiAgICBicmFuY2g6IHN0cmluZztcclxuICAgIGludm9pY2VDb3VudDogbnVtYmVyO1xyXG4gICAgdG90YWxWYWx1ZTogc3RyaW5nO1xyXG4gICAgd2Vla1N0YXJ0OiBEYXRlO1xyXG4gICAgd2Vla0VuZDogRGF0ZTtcclxuICB9PjtcclxuICBkYWlseVRvdGFsczogQXJyYXk8e1xyXG4gICAgZGF0ZTogRGF0ZTtcclxuICAgIGRheU9mV2Vlazogc3RyaW5nO1xyXG4gICAgdG90YWxWYWx1ZTogc3RyaW5nO1xyXG4gICAgaW52b2ljZUNvdW50OiBudW1iZXI7XHJcbiAgICBicmFuY2g6IHN0cmluZztcclxuICB9PjtcclxuICB3ZWVrbHlUb3RhbHM6IHtcclxuICAgIHdvcmtpbmdEYXlzVG90YWw6IHN0cmluZztcclxuICAgIHdlZWtlbmRUb3RhbDogc3RyaW5nO1xyXG4gICAgd2Vla1RvdGFsOiBzdHJpbmc7XHJcbiAgICB3b3JraW5nRGF5czogbnVtYmVyO1xyXG4gICAgd2Vla2VuZERheXM6IG51bWJlcjtcclxuICAgIHdlZWtQZXJpb2Q6IHN0cmluZztcclxuICAgIHRvdGFsUGF5YWJsZTogbnVtYmVyO1xyXG4gICAgdG90YWxSZWNlaXZhYmxlOiBudW1iZXI7XHJcbiAgfTtcclxuICBncmFuZFRvdGFsOiBzdHJpbmc7XHJcbiAgdG90YWxJbnZvaWNlczogbnVtYmVyO1xyXG4gIHRyYW5zYWN0aW9uczogVHJhbnNhY3Rpb25Gb3JFeGNlbFtdOyAvLyBBZGljaW9uYWRvIHBhcmEgZXhwb3J0YcOnw6NvIEV4Y2VsXHJcbn1cclxuXHJcbmludGVyZmFjZSBUcmFuc2FjdGlvbkRhdGEge1xyXG4gIGRhdGU6IERhdGU7XHJcbiAgc3VwcGxpZXI6IHN0cmluZztcclxuICBkb2NOdW1iZXI6IHN0cmluZztcclxuICB2YWx1ZTogbnVtYmVyO1xyXG4gIGNhdGVnb3J5OiBzdHJpbmc7XHJcbiAgYnJhbmNoOiBzdHJpbmc7XHJcbiAgZG9jdW1lbnRUeXBlOiAnQV9QQUdBUicgfCAnQV9SRUNFQkVSJztcclxuICBzb3VyY2VGaWxlOiBzdHJpbmc7IC8vIE5vbWUgb3JpZ2luYWwgZG8gYXJxdWl2byBwYXJhIHNlcGFyYXIgY2F0ZWdvcmlhcyBubyBFeGNlbFxyXG59XHJcblxyXG5pbnRlcmZhY2UgVHJhbnNhY3Rpb25Gb3JFeGNlbCB7XHJcbiAgdmVuY2ltZW50bzogc3RyaW5nO1xyXG4gIHRyYW5zYWNpb25hZG9yOiBzdHJpbmc7XHJcbiAgZG9jdW1lbnRvOiBzdHJpbmc7XHJcbiAgdmFsb3I6IHN0cmluZztcclxuICB2YWxvck51bWVyaWNvOiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBEb2N1bWVudG9Qcm9jZXNzYWRvIHtcclxuICBkYXRhVmVuY2ltZW50bzogRGF0ZTtcclxuICB0cmFuc2FjaW9uYWRvcjogc3RyaW5nO1xyXG4gIG51bWVyb0RvY3VtZW50bzogc3RyaW5nO1xyXG4gIHZhbG9yOiBudW1iZXI7XHJcbiAgdmFsb3JPcmlnaW5hbDogc3RyaW5nO1xyXG4gIGNhdGVnb3JpYTogJ0FfUEFHQVInIHwgJ0FfUkVDRUJFUic7XHJcbiAgZmlsaWFsOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vIEZ1bsOnw6NvIHBhcmEgcGFyc2luZyBkZSBkYXRhcyBDU1YgKEVYQVRBKVxyXG5mdW5jdGlvbiBwYXJzZUNTVkRhdGUoZGF0ZVN0cjogc3RyaW5nKTogRGF0ZSB7XHJcbiAgY29uc3QgZm9ybWF0cyA9IFtcclxuICAgIC8oXFxkezEsMn0pXFwvKFxcZHsxLDJ9KVxcLyhcXGR7NH0pLywgLy8gREQvTU0vWVlZWSAoZm9ybWF0byBicmFzaWxlaXJvKVxyXG4gICAgLyhcXGR7NH0pLShcXGR7MSwyfSktKFxcZHsxLDJ9KS8sICAvLyBZWVlZLU1NLUREIChmb3JtYXRvIElTTylcclxuICBdO1xyXG4gIFxyXG4gIGZvciAoY29uc3QgZm9ybWF0IG9mIGZvcm1hdHMpIHtcclxuICAgIGNvbnN0IG1hdGNoID0gZGF0ZVN0ci5tYXRjaChmb3JtYXQpO1xyXG4gICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgIGlmIChmb3JtYXQgPT09IGZvcm1hdHNbMF0pIHtcclxuICAgICAgICAvLyBERC9NTS9ZWVlZIC0gZm9ybWF0byBicmFzaWxlaXJvXHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KG1hdGNoWzNdKSwgcGFyc2VJbnQobWF0Y2hbMl0pIC0gMSwgcGFyc2VJbnQobWF0Y2hbMV0pKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBZWVlZLU1NLUREIC0gZm9ybWF0byBJU09cclxuICAgICAgICByZXR1cm4gbmV3IERhdGUocGFyc2VJbnQobWF0Y2hbMV0pLCBwYXJzZUludChtYXRjaFsyXSkgLSAxLCBwYXJzZUludChtYXRjaFszXSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBuZXcgRGF0ZShkYXRlU3RyKTsgLy8gRmFsbGJhY2tcclxufVxyXG5cclxuLy8gRnVuw6fDo28gYXV4aWxpYXIgcGFyYSBzZW1hbmEgKEVYQVRBKVxyXG5mdW5jdGlvbiBnZXRXZWVrQm91bmRhcmllcyhkYXRlOiBEYXRlKTogeyB3ZWVrU3RhcnQ6IERhdGU7IHdlZWtFbmQ6IERhdGUgfSB7XHJcbiAgY29uc3QgZGF5T2ZXZWVrID0gZGF0ZS5nZXREYXkoKTtcclxuICBjb25zdCB3ZWVrU3RhcnQgPSBuZXcgRGF0ZShkYXRlKTtcclxuICB3ZWVrU3RhcnQuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRheU9mV2VlayArIChkYXlPZldlZWsgPT09IDAgPyAtNiA6IDEpKTsgLy8gTW9uZGF5XHJcbiAgd2Vla1N0YXJ0LnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG4gIGNvbnN0IHdlZWtFbmQgPSBuZXcgRGF0ZSh3ZWVrU3RhcnQpO1xyXG4gIHdlZWtFbmQuc2V0RGF0ZSh3ZWVrU3RhcnQuZ2V0RGF0ZSgpICsgNik7IC8vIFN1bmRheVxyXG4gIHdlZWtFbmQuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KTtcclxuICByZXR1cm4geyB3ZWVrU3RhcnQsIHdlZWtFbmQgfTtcclxufVxyXG5cclxuLy8gRnVuw6fDo28gcGFyYSBwYXJzaW5nIGRlIHZhbG9yZXMgbW9uZXTDoXJpb3NcclxuZnVuY3Rpb24gcGFyc2VNb25ldGFyeVZhbHVlKHN0cjogc3RyaW5nKTogbnVtYmVyIHtcclxuICBsZXQgY2xlYW5WYWx1ZSA9IHN0ci5yZXBsYWNlKC9bUiRcXHNdL2csICcnKS5yZXBsYWNlKC9cXC4vZywgJycpLnJlcGxhY2UoJywnLCAnLicpO1xyXG4gIFxyXG4gIGNvbnN0IGlzTmVnYXRpdmUgPSBjbGVhblZhbHVlLnN0YXJ0c1dpdGgoJy0nKTtcclxuICBpZiAoaXNOZWdhdGl2ZSkge1xyXG4gICAgY2xlYW5WYWx1ZSA9IGNsZWFuVmFsdWUuc3Vic3RyaW5nKDEpO1xyXG4gIH1cclxuICBcclxuICBjb25zdCB2YWx1ZSA9IHBhcnNlRmxvYXQoY2xlYW5WYWx1ZSk7XHJcbiAgcmV0dXJuIGlzTmVnYXRpdmUgPyAtdmFsdWUgOiB2YWx1ZTtcclxufVxyXG5cclxuLy8gRnVuw6fDo28gcGFyYSBkZXRlY3RhciBlbmNvZGluZ1xyXG5mdW5jdGlvbiBkZXRlY3RFbmNvZGluZyhidWZmZXI6IEJ1ZmZlcik6IHN0cmluZyB7XHJcbiAgY29uc3QgZW5jb2RpbmdzID0gWyd1dGYtOCcsICdsYXRpbjEnLCAnYXNjaWknLCAndXRmMTZsZSddO1xyXG4gIFxyXG4gIGZvciAoY29uc3QgZW5jb2Rpbmcgb2YgZW5jb2RpbmdzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkZWNvZGVkID0gYnVmZmVyLnRvU3RyaW5nKGVuY29kaW5nIGFzIEJ1ZmZlckVuY29kaW5nKTtcclxuICAgICAgLy8gVmVyaWZpY2FyIHNlIGNvbnTDqW0gY2FyYWN0ZXJlcyBlc3BlY2lhaXMgYnJhc2lsZWlyb3NcclxuICAgICAgaWYgKGRlY29kZWQuaW5jbHVkZXMoJ8OnJykgfHwgZGVjb2RlZC5pbmNsdWRlcygnw6MnKSB8fCBkZWNvZGVkLmluY2x1ZGVzKCfDqScpKSB7XHJcbiAgICAgICAgcmV0dXJuIGVuY29kaW5nO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuICd1dGYtOCc7IC8vIGZhbGxiYWNrXHJcbn1cclxuXHJcbi8vIEludGVyZmFjZSBwYXJhIGRvY3VtZW50byBleHRyYcOtZG8gY29uZm9ybWUgZXNwZWNpZmljYcOnw6NvXHJcbmludGVyZmFjZSBEb2N1bWVudG9FeHRyYWlkbyB7XHJcbiAgZGF0YVZlbmNpbWVudG86IERhdGU7ICAgICAgICAgICAvLyBEYXRhIHBhcnNlYWRhIGRhIGNvbHVuYSAxXHJcbiAgdHJhbnNhY2lvbmFkb3I6IHN0cmluZzsgICAgICAgICAvLyBUUkFOU0FDSU9OQURPUiBkYSBjb2x1bmEgMiAoREFETyBQUklOQ0lQQUwpXHJcbiAgbnVtZXJvRG9jdW1lbnRvOiBzdHJpbmc7ICAgICAgICAvLyBOw5pNRVJPIERPIERPQ1VNRU5UTyBkYSBjb2x1bmEgMyAoREFETyBQUklOQ0lQQUwpXHJcbiAgdmFsb3I6IG51bWJlcjsgICAgICAgICAgICAgICAgICAvLyBWYWxvciBudW3DqXJpY28gZGEgY29sdW5hIDVcclxuICB2YWxvck9yaWdpbmFsOiBzdHJpbmc7ICAgICAgICAgIC8vIFZhbG9yIG9yaWdpbmFsIGNvbW8gc3RyaW5nXHJcbiAgY2F0ZWdvcmlhOiAnQV9QQUdBUicgfCAnQV9SRUNFQkVSJztcclxuICBmaWxpYWw6IHN0cmluZzsgICAgICAgICAgICAgICAgIC8vIE5vbWUgZGEgZmlsaWFsXHJcbiAgd2Vla1N0YXJ0OiBEYXRlOyAgICAgICAgICAgICAgICAvLyBJbsOtY2lvIGRhIHNlbWFuYVxyXG4gIHdlZWtFbmQ6IERhdGU7ICAgICAgICAgICAgICAgICAgLy8gRmltIGRhIHNlbWFuYVxyXG4gIHNvdXJjZUZpbGU6IHN0cmluZzsgICAgICAgICAgICAgLy8gTm9tZSBkbyBhcnF1aXZvIGZvbnRlXHJcbn1cclxuXHJcbi8vIEZ1bsOnw6NvIHBhcmEgZXh0cmFpciB0cmFuc2FjaW9uYWRvciBlIGRvY3VtZW50byBzZWd1aW5kbyBlc3BlY2lmaWNhw6fDo28gRVhBVEFcclxuZnVuY3Rpb24gZXh0cmFpclRyYW5zYWNpb25hZG9yRURvY3VtZW50byhjc3ZDb250ZW50OiBzdHJpbmcsIGRvY3VtZW50VHlwZTogJ0FfUEFHQVInIHwgJ0FfUkVDRUJFUicsIG5vbWVGaWxpYWw6IHN0cmluZyk6IERvY3VtZW50b0V4dHJhaWRvW10ge1xyXG4gIC8vIFBhcnNlIENTViBzZW0gaGVhZGVyc1xyXG4gIGNvbnN0IHBhcnNlUmVzdWx0ID0gUGFwYS5wYXJzZShjc3ZDb250ZW50LCB7XHJcbiAgICBoZWFkZXI6IGZhbHNlLFxyXG4gICAgc2tpcEVtcHR5TGluZXM6IHRydWUsXHJcbiAgfSk7XHJcbiAgXHJcbiAgY29uc3Qgcm93cyA9IHBhcnNlUmVzdWx0LmRhdGEgYXMgYW55W107XHJcbiAgY29uc3QgZG9jdW1lbnRvc0V4dHJhaWRvczogRG9jdW1lbnRvRXh0cmFpZG9bXSA9IFtdO1xyXG4gIFxyXG4gIC8vIFByb2Nlc3NhciBjYWRhIGxpbmhhIGRvIENTVlxyXG4gIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcclxuICAgIC8vIFZBTElEQcOHw4NPIEVTVFJVVFVSQUwgT0JSSUdBVMOTUklBXHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocm93KSB8fCByb3cubGVuZ3RoIDwgNSkgY29udGludWU7XHJcbiAgICBcclxuICAgIGNvbnN0IGNhdGVnb3J5ID0gcm93WzBdPy50b1N0cmluZygpLnRyaW0oKSB8fCAnJztcclxuICAgIGxldCBkYXRlU3RyID0gJyc7XHJcbiAgICBsZXQgdHJhbnNhY2lvbmFkb3IgPSAnJztcclxuICAgIGxldCBudW1lcm9Eb2N1bWVudG8gPSAnJztcclxuICAgIGxldCB2YWx1ZVN0ciA9ICcnO1xyXG4gICAgXHJcbiAgICAvLyBMw5NHSUNBIERFIElERU5USUZJQ0HDh8ODTyBQT1IgVElQTyBERSBET0NVTUVOVE9cclxuICAgIGlmIChkb2N1bWVudFR5cGUgPT09ICdBX1BBR0FSJykge1xyXG4gICAgICAvLyBNYXRjaCBFWEFUTyAtIG7Do28gdXNhciBpbmNsdWRlcygpXHJcbiAgICAgIGlmIChjYXRlZ29yeSAhPT0gJ0NvbnRhcyBhIHBhZ2FyLSDDgCB2ZW5jZXInKSBjb250aW51ZTtcclxuICAgICAgXHJcbiAgICAgIC8vIE1BUEVBTUVOVE8gRklYTyBEQVMgQ09MVU5BUzpcclxuICAgICAgZGF0ZVN0ciA9IHJvd1sxXT8udG9TdHJpbmcoKS50cmltKCkgfHwgJyc7ICAgICAgICAgICAvLyBDT0xVTkEgMTogRGF0YSBWZW5jaW1lbnRvXHJcbiAgICAgIHRyYW5zYWNpb25hZG9yID0gcm93WzJdPy50b1N0cmluZygpLnRyaW0oKSB8fCAnJzsgICAgLy8gQ09MVU5BIDI6IFRSQU5TQUNJT05BRE9SXHJcbiAgICAgIG51bWVyb0RvY3VtZW50byA9IHJvd1szXT8udG9TdHJpbmcoKS50cmltKCkgfHwgJyc7ICAgLy8gQ09MVU5BIDM6IE7Dmk1FUk8gRE8gRE9DVU1FTlRPXHJcbiAgICAgIHZhbHVlU3RyID0gcm93WzVdPy50b1N0cmluZygpLnRyaW0oKSB8fCAnMCc7ICAgICAgICAgLy8gQ09MVU5BIDU6IFZhbG9yIChTRU1QUkUgY29sdW5hIDUpXHJcbiAgICAgIFxyXG4gICAgfSBlbHNlIGlmIChkb2N1bWVudFR5cGUgPT09ICdBX1JFQ0VCRVInKSB7XHJcbiAgICAgIC8vIE1hdGNoIEVYQVRPIC0gbsOjbyB1c2FyIGluY2x1ZGVzKClcclxuICAgICAgaWYgKGNhdGVnb3J5ICE9PSAnQ29udGFzIGEgcmVjZWJlciAtIEEgdmVuY2VyJykgY29udGludWU7XHJcbiAgICAgIFxyXG4gICAgICAvLyBNQVBFQU1FTlRPIEZJWE8gREFTIENPTFVOQVM6XHJcbiAgICAgIGRhdGVTdHIgPSByb3dbMV0/LnRvU3RyaW5nKCkudHJpbSgpIHx8ICcnOyAgICAgICAgICAgLy8gQ09MVU5BIDE6IERhdGEgVmVuY2ltZW50b1xyXG4gICAgICB0cmFuc2FjaW9uYWRvciA9IHJvd1syXT8udG9TdHJpbmcoKS50cmltKCkgfHwgJyc7ICAgIC8vIENPTFVOQSAyOiBUUkFOU0FDSU9OQURPUlxyXG4gICAgICBudW1lcm9Eb2N1bWVudG8gPSByb3dbM10/LnRvU3RyaW5nKCkudHJpbSgpIHx8ICcnOyAgIC8vIENPTFVOQSAzOiBOw5pNRVJPIERPIERPQ1VNRU5UT1xyXG4gICAgICB2YWx1ZVN0ciA9IHJvd1s1XT8udG9TdHJpbmcoKS50cmltKCkgfHwgJzAnOyAgICAgICAgIC8vIENPTFVOQSA1OiBWYWxvciAoU0VNUFJFIGNvbHVuYSA1KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBWQUxJREHDh8OVRVMgT0JSSUdBVMOTUklBUyBET1MgREFET1MgRVhUUkHDjURPU1xyXG4gICAgaWYgKCFkYXRlU3RyIHx8ICF0cmFuc2FjaW9uYWRvciB8fCAhdmFsdWVTdHIpIGNvbnRpbnVlO1xyXG4gICAgXHJcbiAgICAvLyBQQVJTSU5HIERBIERBVEEgREUgVkVOQ0lNRU5UT1xyXG4gICAgY29uc3QgZGF0ZSA9IHBhcnNlQ1NWRGF0ZShkYXRlU3RyKTtcclxuICAgIGlmICghZGF0ZSB8fCBpc05hTihkYXRlLmdldFRpbWUoKSkpIGNvbnRpbnVlO1xyXG4gICAgXHJcbiAgICAvLyBQQVJTSU5HIERPIFZBTE9SIE1PTkVUw4FSSU8gKGZvcm1hdG8gYnJhc2lsZWlybylcclxuICAgIGxldCBjbGVhblZhbHVlID0gdmFsdWVTdHIucmVwbGFjZSgvW1IkXFxzXS9nLCAnJykucmVwbGFjZSgvXFwuL2csICcnKS5yZXBsYWNlKCcsJywgJy4nKTtcclxuICAgIGNvbnN0IGlzTmVnYXRpdmUgPSBjbGVhblZhbHVlLnN0YXJ0c1dpdGgoJy0nKTtcclxuICAgIGlmIChpc05lZ2F0aXZlKSB7XHJcbiAgICAgIGNsZWFuVmFsdWUgPSBjbGVhblZhbHVlLnN1YnN0cmluZygxKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHZhbHVlID0gcGFyc2VGbG9hdChjbGVhblZhbHVlKTtcclxuICAgIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPD0gMCkgY29udGludWU7XHJcbiAgICBcclxuICAgIC8vIEFQTElDQcOHw4NPIERFIEZBTExCQUNLUyBQQVJBIENBTVBPUyBPQlJJR0FUw5NSSU9TXHJcbiAgICBjb25zdCB0cmFuc2FjaW9uYWRvckZpbmFsID0gdHJhbnNhY2lvbmFkb3IgfHwgJ0ZPUk5FQ0VET1IgTsODTyBJREVOVElGSUNBRE8nO1xyXG4gICAgY29uc3QgbnVtZXJvRG9jdW1lbnRvRmluYWwgPSBudW1lcm9Eb2N1bWVudG8gfHwgJyc7IC8vIFJlbW92aWRvIGZhbGxiYWNrICdQRU5ERU5URSdcclxuICAgIFxyXG4gICAgLy8gRVNUUlVUVVJBIEZJTkFMIERPUyBEQURPUyBFWFRSQcONRE9TXHJcbiAgICBjb25zdCB7IHdlZWtTdGFydCwgd2Vla0VuZCB9ID0gZ2V0V2Vla0JvdW5kYXJpZXMoZGF0ZSk7XHJcbiAgICBkb2N1bWVudG9zRXh0cmFpZG9zLnB1c2goe1xyXG4gICAgICBkYXRhVmVuY2ltZW50bzogZGF0ZSxcclxuICAgICAgdHJhbnNhY2lvbmFkb3I6IHRyYW5zYWNpb25hZG9yRmluYWwsICAgICAgLy8gREFETyBQUklOQ0lQQUwgRVhUUkHDjURPXHJcbiAgICAgIG51bWVyb0RvY3VtZW50bzogbnVtZXJvRG9jdW1lbnRvRmluYWwsICAgIC8vIERBRE8gUFJJTkNJUEFMIEVYVFJBw41ET1xyXG4gICAgICB2YWxvcjogdmFsdWUsXHJcbiAgICAgIHZhbG9yT3JpZ2luYWw6IHZhbHVlU3RyLFxyXG4gICAgICBjYXRlZ29yaWE6IGRvY3VtZW50VHlwZSxcclxuICAgICAgZmlsaWFsOiBub21lRmlsaWFsLFxyXG4gICAgICAvLyBEYWRvcyBkZSBjb21wYXRpYmlsaWRhZGVcclxuICAgICAgd2Vla1N0YXJ0OiB3ZWVrU3RhcnQsXHJcbiAgICAgIHdlZWtFbmQ6IHdlZWtFbmQsXHJcbiAgICAgIHNvdXJjZUZpbGU6IGAke25vbWVGaWxpYWx9LmNzdmBcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gZG9jdW1lbnRvc0V4dHJhaWRvcztcclxufVxyXG5cclxuLy8gQ29uZmlndXJhw6fDo28gcGFyYSBkZXNhYmlsaXRhciBvIHBhcnNlciBwYWRyw6NvIGRvIE5leHQuanNcclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxyXG4gIH0sXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXHJcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcclxuICByZXM6IE5leHRBcGlSZXNwb25zZVxyXG4pIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBtZXNzYWdlOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KVxyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCc9PT0gREVCVUcgVVBMT0FEIENTViA9PT0nKTtcclxuICAgIGNvbnNvbGUubG9nKCdNZXRob2Q6JywgcmVxLm1ldGhvZCk7XHJcbiAgICBjb25zb2xlLmxvZygnQ29udGVudC1UeXBlOicsIHJlcS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSk7XHJcbiAgICBjb25zb2xlLmxvZygnSGVhZGVyczonLCBKU09OLnN0cmluZ2lmeShyZXEuaGVhZGVycywgbnVsbCwgMikpO1xyXG4gICAgXHJcbiAgICAvLyBHYXJhbnRpciBxdWUgYSBwYXN0YSB0ZW1wIGV4aXN0ZVxyXG4gICAgY29uc3QgdGVtcERpciA9ICcuL3RlbXAnO1xyXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHRlbXBEaXIpKSB7XHJcbiAgICAgIGZzLm1rZGlyU3luYyh0ZW1wRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ29uZmlndXJhciBmb3JtaWRhYmxlIHBhcmEgdXBsb2FkIGRlIG3Dumx0aXBsb3MgYXJxdWl2b3NcclxuICAgIGNvbnN0IGZvcm0gPSBmb3JtaWRhYmxlKHtcclxuICAgICAgdXBsb2FkRGlyOiB0ZW1wRGlyLFxyXG4gICAgICBrZWVwRXh0ZW5zaW9uczogdHJ1ZSxcclxuICAgICAgbWF4RmlsZXM6IDEwLFxyXG4gICAgICBtYXhGaWxlU2l6ZTogMTAgKiAxMDI0ICogMTAyNCwgLy8gMTBNQlxyXG4gICAgICAvLyBSZW1vdmVyIGZpbHRlciBwYXJhIGFjZWl0YXIgdG9kb3Mgb3MgYXJxdWl2b3MgcG9yIGVucXVhbnRvXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBbZmllbGRzLCBmaWxlc10gPSBhd2FpdCBmb3JtLnBhcnNlKHJlcSk7XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCc9PT0gUEFSU0VEIERBVEEgPT09Jyk7XHJcbiAgICBjb25zb2xlLmxvZygnRmllbGRzOicsIEpTT04uc3RyaW5naWZ5KGZpZWxkcywgbnVsbCwgMikpO1xyXG4gICAgY29uc29sZS5sb2coJ0ZpbGVzIGtleXM6JywgT2JqZWN0LmtleXMoZmlsZXMpKTtcclxuICAgIGNvbnNvbGUubG9nKCdGaWxlcyBzdHJ1Y3R1cmU6JywgSlNPTi5zdHJpbmdpZnkoZmlsZXMsIG51bGwsIDIpKTtcclxuICAgIFxyXG4gICAgLy8gT2J0ZXIgdGlwb3MgZGUgZG9jdW1lbnRvIHNlbGVjaW9uYWRvc1xyXG4gICAgbGV0IHNlbGVjdGVkVHlwZXM6ICgnQV9QQUdBUicgfCAnQV9SRUNFQkVSJylbXSA9IFsnQV9QQUdBUicsICdBX1JFQ0VCRVInXTsgLy8gRGVmYXVsdFxyXG4gICAgXHJcbiAgICBpZiAoZmllbGRzLmRvY3VtZW50VHlwZXMgJiYgZmllbGRzLmRvY3VtZW50VHlwZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBkb2N1bWVudFR5cGVzU3RyaW5nID0gZmllbGRzLmRvY3VtZW50VHlwZXNbMF0gYXMgc3RyaW5nO1xyXG4gICAgICBjb25zb2xlLmxvZygnZG9jdW1lbnRUeXBlc1N0cmluZyByZWNlYmlkbzonLCBkb2N1bWVudFR5cGVzU3RyaW5nKTtcclxuICAgICAgXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gVGVudGFyIGZhemVyIHBhcnNlIHNlIGZvciBKU09OXHJcbiAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShkb2N1bWVudFR5cGVzU3RyaW5nKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnSlNPTiBwYXJzZWQ6JywgcGFyc2VkKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWQpKSB7XHJcbiAgICAgICAgICBzZWxlY3RlZFR5cGVzID0gcGFyc2VkO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHBhcnNlZCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgIC8vIFNlIGZvciB1bSBvYmpldG8gY29tIGluZGljZXMsIGV4dHJhaXIgb3MgdmFsb3JlcyBlIGZsYXR0ZW5cclxuICAgICAgICAgIGNvbnN0IGFsbFR5cGVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgT2JqZWN0LnZhbHVlcyhwYXJzZWQpLmZvckVhY2godHlwZUFycmF5ID0+IHtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZUFycmF5KSkge1xyXG4gICAgICAgICAgICAgIGFsbFR5cGVzLnB1c2goLi4udHlwZUFycmF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICAvLyBSZW1vdmVyIGR1cGxpY2F0YXNcclxuICAgICAgICAgIGNvbnN0IHVuaXF1ZVR5cGVzID0gQXJyYXkuZnJvbShuZXcgU2V0KGFsbFR5cGVzKSk7XHJcbiAgICAgICAgICBzZWxlY3RlZFR5cGVzID0gdW5pcXVlVHlwZXMgYXMgKCdBX1BBR0FSJyB8ICdBX1JFQ0VCRVInKVtdO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvIG5vIHBhcnNlIEpTT046JywgZSk7XHJcbiAgICAgICAgLy8gU2UgbsOjbyBmb3IgSlNPTiwgdXNhciBjb21vIGFycmF5IGRpcmV0b1xyXG4gICAgICAgIHNlbGVjdGVkVHlwZXMgPSBBcnJheS5pc0FycmF5KGZpZWxkcy5kb2N1bWVudFR5cGVzKSBcclxuICAgICAgICAgID8gZmllbGRzLmRvY3VtZW50VHlwZXMgYXMgKCdBX1BBR0FSJyB8ICdBX1JFQ0VCRVInKVtdXHJcbiAgICAgICAgICA6IFtkb2N1bWVudFR5cGVzU3RyaW5nIGFzICdBX1BBR0FSJyB8ICdBX1JFQ0VCRVInXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnU2VsZWN0ZWQgdHlwZXMgcHJvY2Vzc2Fkb3M6Jywgc2VsZWN0ZWRUeXBlcyk7XHJcbiAgICBcclxuICAgIC8vIE5PUk1BTElaQcOHw4NPIFJPQlVTVEEgREUgQVJRVUlWT1MgKG11bHRpLWZpZWxkLCBtdWx0aS1maWxlKVxyXG4gICAgY29uc3QgYWxsRmlsZXMgPSBPYmplY3QudmFsdWVzKGZpbGVzKS5mbGF0KCkuZmlsdGVyKEJvb2xlYW4pIGFzIGZvcm1pZGFibGUuRmlsZVtdO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnPT09IEZJTEUgUFJPQ0VTU0lORyA9PT0nKTtcclxuICAgIGNvbnNvbGUubG9nKCdhbGxGaWxlcyAobm9ybWFsaXphZG8pOicsIGFsbEZpbGVzLm1hcChmID0+ICh7IG9yaWdpbmFsRmlsZW5hbWU6IGYub3JpZ2luYWxGaWxlbmFtZSwgcGF0aDogZi5maWxlcGF0aCB9KSkpO1xyXG4gICAgY29uc29sZS5sb2coJ2FsbEZpbGVzIGxlbmd0aDonLCBhbGxGaWxlcy5sZW5ndGgpO1xyXG4gICAgXHJcbiAgICAvLyBGaWx0cmFyIGFwZW5hcyBhcnF1aXZvcyBDU1YgLSBzZW5kbyBtYWlzIHBlcm1pc3Npdm8gcGFyYSBkZWJ1Z1xyXG4gICAgY29uc3QgY3N2RmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoZmlsZSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyBmaWxlOicsIGZpbGUgPyB7XHJcbiAgICAgICAgb3JpZ2luYWxGaWxlbmFtZTogZmlsZS5vcmlnaW5hbEZpbGVuYW1lLFxyXG4gICAgICAgIG1pbWV0eXBlOiBmaWxlLm1pbWV0eXBlLFxyXG4gICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcclxuICAgICAgICBmaWxlcGF0aDogZmlsZS5maWxlcGF0aFxyXG4gICAgICB9IDogJ251bGwgZmlsZScpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCFmaWxlIHx8ICFmaWxlLm9yaWdpbmFsRmlsZW5hbWUpIHJldHVybiBmYWxzZTtcclxuICAgICAgLy8gQWNlaXRhciAuY3N2IG91IC50eHQgKGFsZ3VucyBzaXN0ZW1hcyBleHBvcnRhbSBhc3NpbSksIGNhc2UgaW5zZW5zaXRpdmVcclxuICAgICAgcmV0dXJuIC9cXC4oY3N2fHR4dCkkL2kudGVzdChmaWxlLm9yaWdpbmFsRmlsZW5hbWUpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCc9PT0gRklMVEVSSU5HIFJFU1VMVFMgPT09Jyk7XHJcbiAgICBjb25zb2xlLmxvZygnQ1NWIEZpbGVzIGZvdW5kOicsIGNzdkZpbGVzLmxlbmd0aCk7XHJcbiAgICBjb25zb2xlLmxvZygnU2VsZWN0ZWQgdHlwZXM6Jywgc2VsZWN0ZWRUeXBlcyk7XHJcbiAgICBjb25zb2xlLmxvZygnQ1NWIEZpbGVzIGRldGFpbHM6JywgY3N2RmlsZXMubWFwKGYgPT4gZiA/IHtcclxuICAgICAgbmFtZTogZi5vcmlnaW5hbEZpbGVuYW1lLFxyXG4gICAgICB0eXBlOiBmLm1pbWV0eXBlLFxyXG4gICAgICBzaXplOiBmLnNpemVcclxuICAgIH0gOiBudWxsKSk7XHJcbiAgICBcclxuICAgIGlmIChjc3ZGaWxlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJz09PSBFUlJPUjogTk8gRklMRVMgPT09Jyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdObyBDU1YgZmlsZXMgZm91bmQgYWZ0ZXIgZmlsdGVyaW5nJyk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogYE5lbmh1bSBhcnF1aXZvIGZvaSBlbmNvbnRyYWRvLiBBcnF1aXZvcyByZWNlYmlkb3M6ICR7YWxsRmlsZXMubGVuZ3RofS4gVmVyaWZpcXVlIHNlIG8gYXJxdWl2byDDqSB1bSBDU1YgdsOhbGlkby5gXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFsbFRyYW5zYWN0aW9uczogVHJhbnNhY3Rpb25EYXRhW10gPSBbXTtcclxuICAgIGNvbnN0IGFsbEZpbGVzRGF0YTogYW55W10gPSBbXTtcclxuICAgIFxyXG4gICAgLy8gUHJvY2Vzc2FyIGNhZGEgYXJxdWl2byBDU1ZcclxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBjc3ZGaWxlcykge1xyXG4gICAgICBjb25zb2xlLmxvZyhgPT09IFBST0NFU1NJTkcgRklMRTogJHtmaWxlPy5vcmlnaW5hbEZpbGVuYW1lfSA9PT1gKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghZmlsZSB8fCAhZmlsZS5maWxlcGF0aCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyBpbnZhbGlkIGZpbGU6JywgZmlsZSk7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuICAgICAgdHJ5IHtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdGaWxlIHBhdGg6JywgZmlsZS5maWxlcGF0aCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdGaWxlIGV4aXN0czonLCBmcy5leGlzdHNTeW5jKGZpbGUuZmlsZXBhdGgpKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGJ1ZmZlciA9IGZzLnJlYWRGaWxlU3luYyhmaWxlLmZpbGVwYXRoKTtcclxuICAgICAgY29uc3QgZW5jb2RpbmcgPSBkZXRlY3RFbmNvZGluZyhidWZmZXIpO1xyXG4gICAgICBjb25zdCBjc3ZDb250ZW50ID0gYnVmZmVyLnRvU3RyaW5nKGVuY29kaW5nIGFzIEJ1ZmZlckVuY29kaW5nKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEV4dHJhaXIgbm9tZSBkYSBmaWxpYWxcclxuICAgICAgY29uc3QgYnJhbmNoTmFtZSA9IChmaWxlLm9yaWdpbmFsRmlsZW5hbWUgfHwgJ0ZJTElBTF9ERVNDT05IRUNJREEnKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXC4oY3N2fHR4dCkkL2ksICcnKVxyXG4gICAgICAgIC50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZmlsZVRyYW5zYWN0aW9uczogVHJhbnNhY3Rpb25EYXRhW10gPSBbXTtcclxuICAgICAgXHJcbiAgICAgIC8vIFByb2Nlc3NhciBjYWRhIHRpcG8gZGUgZG9jdW1lbnRvIHNlbGVjaW9uYWRvIHVzYW5kbyBhIG5vdmEgbMOzZ2ljYVxyXG4gICAgICBmb3IgKGNvbnN0IGRvY3VtZW50VHlwZSBvZiBzZWxlY3RlZFR5cGVzIGFzICgnQV9QQUdBUicgfCAnQV9SRUNFQkVSJylbXSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzYW5kbyB0aXBvIGRlIGRvY3VtZW50bzogJHtkb2N1bWVudFR5cGV9IHBhcmEgYXJxdWl2bzogJHtmaWxlLm9yaWdpbmFsRmlsZW5hbWV9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVXNhciBhIGZ1bsOnw6NvIGRlIGV4dHJhw6fDo28gZXNwZWPDrWZpY2EgY29tIGEgbMOzZ2ljYSBjb3JyZXRhXHJcbiAgICAgICAgY29uc3QgZG9jdW1lbnRvc0V4dHJhaWRvcyA9IGV4dHJhaXJUcmFuc2FjaW9uYWRvckVEb2N1bWVudG8oY3N2Q29udGVudCwgZG9jdW1lbnRUeXBlLCBicmFuY2hOYW1lKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZyhgRG9jdW1lbnRvcyBleHRyYcOtZG9zIHBhcmEgJHtkb2N1bWVudFR5cGV9OmAsIGRvY3VtZW50b3NFeHRyYWlkb3MubGVuZ3RoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMb2cgZG9zIHByaW1laXJvcyBkb2N1bWVudG9zIHBhcmEgZGVidWdcclxuICAgICAgICBpZiAoZG9jdW1lbnRvc0V4dHJhaWRvcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnUHJpbWVpcm9zIGRvY3VtZW50b3MgZXh0cmHDrWRvczonLCBkb2N1bWVudG9zRXh0cmFpZG9zLnNsaWNlKDAsIDMpLm1hcChkb2MgPT4gKHtcclxuICAgICAgICAgICAgdHJhbnNhY2lvbmFkb3I6IGRvYy50cmFuc2FjaW9uYWRvcixcclxuICAgICAgICAgICAgbnVtZXJvRG9jdW1lbnRvOiBkb2MubnVtZXJvRG9jdW1lbnRvLFxyXG4gICAgICAgICAgICB2YWxvcjogZG9jLnZhbG9yLFxyXG4gICAgICAgICAgICBkYXRhVmVuY2ltZW50bzogZG9jLmRhdGFWZW5jaW1lbnRvLnRvTG9jYWxlRGF0ZVN0cmluZygncHQtQlInKVxyXG4gICAgICAgICAgfSkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ29udmVydGVyIHBhcmEgbyBmb3JtYXRvIFRyYW5zYWN0aW9uRGF0YSAobWFudGVyIGNvbXBhdGliaWxpZGFkZSlcclxuICAgICAgICBmb3IgKGNvbnN0IGRvYyBvZiBkb2N1bWVudG9zRXh0cmFpZG9zKSB7XHJcbiAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb25EYXRhID0ge1xyXG4gICAgICAgICAgICBkYXRlOiBkb2MuZGF0YVZlbmNpbWVudG8sXHJcbiAgICAgICAgICAgIHN1cHBsaWVyOiBkb2MudHJhbnNhY2lvbmFkb3IsICAgICAgICAvLyBUUkFOU0FDSU9OQURPUiBDT1JSRVRPIGRhIGNvbHVuYSAyXHJcbiAgICAgICAgICAgIGRvY051bWJlcjogZG9jLm51bWVyb0RvY3VtZW50bywgICAgICAvLyBOw5pNRVJPIERPIERPQ1VNRU5UTyBDT1JSRVRPIGRhIGNvbHVuYSAzXHJcbiAgICAgICAgICAgIHZhbHVlOiBkb2MudmFsb3IsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiBkb2N1bWVudFR5cGUgPT09ICdBX1BBR0FSJyA/ICdDb250YXMgYSBwYWdhci0gw4AgdmVuY2VyJyA6ICdDb250YXMgYSByZWNlYmVyIC0gQSB2ZW5jZXInLFxyXG4gICAgICAgICAgICBicmFuY2g6IGRvYy5maWxpYWwsXHJcbiAgICAgICAgICAgIGRvY3VtZW50VHlwZTogZG9jLmNhdGVnb3JpYSxcclxuICAgICAgICAgICAgc291cmNlRmlsZTogZmlsZS5vcmlnaW5hbEZpbGVuYW1lIHx8IGAke2JyYW5jaE5hbWV9LmNzdmBcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGZpbGVUcmFuc2FjdGlvbnMucHVzaCh0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgICBhbGxUcmFuc2FjdGlvbnMucHVzaCh0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBhbGxGaWxlc0RhdGEucHVzaCh7XHJcbiAgICAgICAgZmlsZW5hbWU6IGZpbGUub3JpZ2luYWxGaWxlbmFtZSxcclxuICAgICAgICBicmFuY2g6IGJyYW5jaE5hbWUsXHJcbiAgICAgICAgdHJhbnNhY3Rpb25zOiBmaWxlVHJhbnNhY3Rpb25zLFxyXG4gICAgICAgIHRvdGFsVHJhbnNhY3Rpb25zOiBmaWxlVHJhbnNhY3Rpb25zLmxlbmd0aFxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIExpbXBhciBhcnF1aXZvIHRlbXBvcsOhcmlvXHJcbiAgICAgIGlmIChmaWxlLmZpbGVwYXRoICYmIGZzLmV4aXN0c1N5bmMoZmlsZS5maWxlcGF0aCkpIHtcclxuICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGUuZmlsZXBhdGgpO1xyXG4gICAgICB9XHJcbiAgICAgIH0gY2F0Y2gocHJvY2Vzc0ZpbGVFcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIHByb2Nlc3NhciBhcnF1aXZvIGluZGl2aWR1YWwsIGNvbnRpbnVhbmRvIGNvbSBvcyBkZW1haXM6JywgZmlsZT8ub3JpZ2luYWxGaWxlbmFtZSwgcHJvY2Vzc0ZpbGVFcnIpO1xyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEFncmVnYcOnw6NvIGRlIGRhZG9zXHJcbiAgICBjb25zdCBicmFuY2hUb3RhbHNNYXAgPSBuZXcgTWFwPHN0cmluZywge1xyXG4gICAgICBpbnZvaWNlQ291bnQ6IG51bWJlcjtcclxuICAgICAgdG90YWxWYWx1ZTogbnVtYmVyO1xyXG4gICAgICB3ZWVrU3RhcnQ6IERhdGU7XHJcbiAgICAgIHdlZWtFbmQ6IERhdGU7XHJcbiAgICB9PigpO1xyXG4gICAgXHJcbiAgICBjb25zdCBkYWlseVRvdGFsc01hcCA9IG5ldyBNYXA8c3RyaW5nLCB7XHJcbiAgICAgIGRhdGU6IERhdGU7XHJcbiAgICAgIGRheU9mV2Vlazogc3RyaW5nO1xyXG4gICAgICB0b3RhbFZhbHVlOiBudW1iZXI7XHJcbiAgICAgIGludm9pY2VDb3VudDogbnVtYmVyO1xyXG4gICAgICBicmFuY2g6IHN0cmluZztcclxuICAgIH0+KCk7XHJcbiAgICBcclxuICAgIGxldCB0b3RhbFBheWFibGUgPSAwO1xyXG4gICAgbGV0IHRvdGFsUmVjZWl2YWJsZSA9IDA7XHJcbiAgICBsZXQgZ3JhbmRUb3RhbFZhbHVlID0gMDtcclxuICAgIFxyXG4gICAgLy8gUHJvY2Vzc2FyIHRyYW5zYcOnw7VlcyBwYXJhIGFncmVnYcOnw6NvXHJcbiAgICBhbGxUcmFuc2FjdGlvbnMuZm9yRWFjaCh0cmFuc2FjdGlvbiA9PiB7XHJcbiAgICAgIGNvbnN0IHsgYnJhbmNoLCBkYXRlLCB2YWx1ZSwgZG9jdW1lbnRUeXBlIH0gPSB0cmFuc2FjdGlvbjtcclxuICAgICAgXHJcbiAgICAgIC8vIEF0dWFsaXphciB0b3RhaXMgcG9yIGZpbGlhbFxyXG4gICAgICBjb25zdCB7IHdlZWtTdGFydCwgd2Vla0VuZCB9ID0gZ2V0V2Vla0JvdW5kYXJpZXMoZGF0ZSk7XHJcbiAgICAgIGNvbnN0IGJyYW5jaEtleSA9IGJyYW5jaDtcclxuICAgICAgXHJcbiAgICAgIGlmICghYnJhbmNoVG90YWxzTWFwLmhhcyhicmFuY2hLZXkpKSB7XHJcbiAgICAgICAgYnJhbmNoVG90YWxzTWFwLnNldChicmFuY2hLZXksIHtcclxuICAgICAgICAgIGludm9pY2VDb3VudDogMCxcclxuICAgICAgICAgIHRvdGFsVmFsdWU6IDAsXHJcbiAgICAgICAgICB3ZWVrU3RhcnQsXHJcbiAgICAgICAgICB3ZWVrRW5kXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGJyYW5jaFRvdGFsID0gYnJhbmNoVG90YWxzTWFwLmdldChicmFuY2hLZXkpITtcclxuICAgICAgYnJhbmNoVG90YWwuaW52b2ljZUNvdW50Kys7XHJcbiAgICAgIGJyYW5jaFRvdGFsLnRvdGFsVmFsdWUgKz0gdmFsdWU7XHJcbiAgICAgIFxyXG4gICAgICAvLyBBdHVhbGl6YXIgdG90YWlzIGRpw6FyaW9zXHJcbiAgICAgIGNvbnN0IGRhdGVLZXkgPSBgJHticmFuY2h9LSR7ZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19YDtcclxuICAgICAgY29uc3QgZGF5T2ZXZWVrID0gWydEb21pbmdvJywgJ1NlZ3VuZGEnLCAnVGVyw6dhJywgJ1F1YXJ0YScsICdRdWludGEnLCAnU2V4dGEnLCAnU8OhYmFkbyddW2RhdGUuZ2V0RGF5KCldO1xyXG4gICAgICBcclxuICAgICAgaWYgKCFkYWlseVRvdGFsc01hcC5oYXMoZGF0ZUtleSkpIHtcclxuICAgICAgICBkYWlseVRvdGFsc01hcC5zZXQoZGF0ZUtleSwge1xyXG4gICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgIGRheU9mV2VlayxcclxuICAgICAgICAgIHRvdGFsVmFsdWU6IDAsXHJcbiAgICAgICAgICBpbnZvaWNlQ291bnQ6IDAsXHJcbiAgICAgICAgICBicmFuY2hcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgZGFpbHlUb3RhbCA9IGRhaWx5VG90YWxzTWFwLmdldChkYXRlS2V5KSE7XHJcbiAgICAgIGRhaWx5VG90YWwudG90YWxWYWx1ZSArPSB2YWx1ZTtcclxuICAgICAgZGFpbHlUb3RhbC5pbnZvaWNlQ291bnQrKztcclxuICAgICAgXHJcbiAgICAgIC8vIEF0dWFsaXphciB0b3RhaXMgcG9yIHRpcG9cclxuICAgICAgaWYgKGRvY3VtZW50VHlwZSA9PT0gJ0FfUEFHQVInKSB7XHJcbiAgICAgICAgdG90YWxQYXlhYmxlICs9IHZhbHVlO1xyXG4gICAgICB9IGVsc2UgaWYgKGRvY3VtZW50VHlwZSA9PT0gJ0FfUkVDRUJFUicpIHtcclxuICAgICAgICB0b3RhbFJlY2VpdmFibGUgKz0gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGdyYW5kVG90YWxWYWx1ZSArPSB2YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBDb252ZXJ0ZXIgTWFwcyBwYXJhIGFycmF5c1xyXG4gICAgY29uc3QgYnJhbmNoVG90YWxzID0gQXJyYXkuZnJvbShicmFuY2hUb3RhbHNNYXAuZW50cmllcygpKS5tYXAoKFticmFuY2gsIGRhdGFdKSA9PiAoe1xyXG4gICAgICBicmFuY2gsXHJcbiAgICAgIGludm9pY2VDb3VudDogZGF0YS5pbnZvaWNlQ291bnQsXHJcbiAgICAgIHRvdGFsVmFsdWU6IGBSJCAke2RhdGEudG90YWxWYWx1ZS50b0xvY2FsZVN0cmluZygncHQtQlInLCB7IG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMiB9KX1gLFxyXG4gICAgICB3ZWVrU3RhcnQ6IGRhdGEud2Vla1N0YXJ0LFxyXG4gICAgICB3ZWVrRW5kOiBkYXRhLndlZWtFbmRcclxuICAgIH0pKTtcclxuICAgIFxyXG4gICAgY29uc3QgZGFpbHlUb3RhbHMgPSBBcnJheS5mcm9tKGRhaWx5VG90YWxzTWFwLnZhbHVlcygpKS5tYXAoZGF0YSA9PiAoe1xyXG4gICAgICAuLi5kYXRhLFxyXG4gICAgICB0b3RhbFZhbHVlOiBgUiQgJHtkYXRhLnRvdGFsVmFsdWUudG9Mb2NhbGVTdHJpbmcoJ3B0LUJSJywgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSl9YFxyXG4gICAgfSkpO1xyXG4gICAgXHJcbiAgICAvLyBDYWxjdWxhciB0b3RhaXMgc2VtYW5haXNcclxuICAgIGNvbnN0IHdvcmtpbmdEYXlzVG90YWwgPSBkYWlseVRvdGFsc1xyXG4gICAgICAuZmlsdGVyKGQgPT4gIVswLCA2XS5pbmNsdWRlcyhkLmRhdGUuZ2V0RGF5KCkpKSAvLyBOw6NvIGRvbWluZ28vc8OhYmFkb1xyXG4gICAgICAucmVkdWNlKChzdW0sIGQpID0+IHN1bSArIHBhcnNlTW9uZXRhcnlWYWx1ZShkLnRvdGFsVmFsdWUpLCAwKTtcclxuICAgICAgXHJcbiAgICBjb25zdCB3ZWVrZW5kVG90YWwgPSBkYWlseVRvdGFsc1xyXG4gICAgICAuZmlsdGVyKGQgPT4gWzAsIDZdLmluY2x1ZGVzKGQuZGF0ZS5nZXREYXkoKSkpIC8vIERvbWluZ28vc8OhYmFkb1xyXG4gICAgICAucmVkdWNlKChzdW0sIGQpID0+IHN1bSArIHBhcnNlTW9uZXRhcnlWYWx1ZShkLnRvdGFsVmFsdWUpLCAwKTtcclxuICAgIFxyXG4gICAgY29uc3Qgd29ya2luZ0RheXMgPSBkYWlseVRvdGFscy5maWx0ZXIoZCA9PiAhWzAsIDZdLmluY2x1ZGVzKGQuZGF0ZS5nZXREYXkoKSkpLmxlbmd0aDtcclxuICAgIGNvbnN0IHdlZWtlbmREYXlzID0gZGFpbHlUb3RhbHMuZmlsdGVyKGQgPT4gWzAsIDZdLmluY2x1ZGVzKGQuZGF0ZS5nZXREYXkoKSkpLmxlbmd0aDtcclxuICAgIFxyXG4gICAgY29uc3QgbWluRGF0ZSA9IGFsbFRyYW5zYWN0aW9ucy5sZW5ndGggPiAwIFxyXG4gICAgICA/IG5ldyBEYXRlKE1hdGgubWluKC4uLmFsbFRyYW5zYWN0aW9ucy5tYXAodCA9PiB0LmRhdGUuZ2V0VGltZSgpKSkpXHJcbiAgICAgIDogbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IG1heERhdGUgPSBhbGxUcmFuc2FjdGlvbnMubGVuZ3RoID4gMCBcclxuICAgICAgPyBuZXcgRGF0ZShNYXRoLm1heCguLi5hbGxUcmFuc2FjdGlvbnMubWFwKHQgPT4gdC5kYXRlLmdldFRpbWUoKSkpKVxyXG4gICAgICA6IG5ldyBEYXRlKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IHByb2Nlc3NlZERhdGE6IFByb2Nlc3NlZERhdGEgPSB7XHJcbiAgICAgIGJyYW5jaFRvdGFscyxcclxuICAgICAgZGFpbHlUb3RhbHMsXHJcbiAgICAgIHdlZWtseVRvdGFsczoge1xyXG4gICAgICAgIHdvcmtpbmdEYXlzVG90YWw6IGBSJCAke3dvcmtpbmdEYXlzVG90YWwudG9Mb2NhbGVTdHJpbmcoJ3B0LUJSJywgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSl9YCxcclxuICAgICAgICB3ZWVrZW5kVG90YWw6IGBSJCAke3dlZWtlbmRUb3RhbC50b0xvY2FsZVN0cmluZygncHQtQlInLCB7IG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMiB9KX1gLFxyXG4gICAgICAgIHdlZWtUb3RhbDogYFIkICR7Z3JhbmRUb3RhbFZhbHVlLnRvTG9jYWxlU3RyaW5nKCdwdC1CUicsIHsgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pfWAsXHJcbiAgICAgICAgd29ya2luZ0RheXMsXHJcbiAgICAgICAgd2Vla2VuZERheXMsXHJcbiAgICAgICAgd2Vla1BlcmlvZDogYCR7bWluRGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ3B0LUJSJyl9IC0gJHttYXhEYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygncHQtQlInKX1gLFxyXG4gICAgICAgIHRvdGFsUGF5YWJsZSxcclxuICAgICAgICB0b3RhbFJlY2VpdmFibGVcclxuICAgICAgfSxcclxuICAgICAgZ3JhbmRUb3RhbDogYFIkICR7Z3JhbmRUb3RhbFZhbHVlLnRvTG9jYWxlU3RyaW5nKCdwdC1CUicsIHsgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pfWAsXHJcbiAgICAgIHRvdGFsSW52b2ljZXM6IGFsbFRyYW5zYWN0aW9ucy5sZW5ndGgsXHJcbiAgICAgIHRyYW5zYWN0aW9uczogYWxsVHJhbnNhY3Rpb25zLm1hcCh0cmFuc2FjdGlvbiA9PiAoe1xyXG4gICAgICAgIHZlbmNpbWVudG86IHRyYW5zYWN0aW9uLmRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdwdC1CUicpLFxyXG4gICAgICAgIHRyYW5zYWNpb25hZG9yOiB0cmFuc2FjdGlvbi5zdXBwbGllciwgIC8vIFVTQU5ETyBzdXBwbGllciBDT1JSRVRPXHJcbiAgICAgICAgZG9jdW1lbnRvOiB0cmFuc2FjdGlvbi5kb2NOdW1iZXIsICAgICAgLy8gVVNBTkRPIGRvY051bWJlciBDT1JSRVRPICBcclxuICAgICAgICB2YWxvcjogYFIkICR7dHJhbnNhY3Rpb24udmFsdWUudG9Mb2NhbGVTdHJpbmcoJ3B0LUJSJywgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSl9YCxcclxuICAgICAgICB2YWxvck51bWVyaWNvOiB0cmFuc2FjdGlvbi52YWx1ZSxcclxuICAgICAgICBkb2N1bWVudFR5cGU6IHRyYW5zYWN0aW9uLmRvY3VtZW50VHlwZSwgLy8gcHJlc2VydmEgdGlwbyByZWFsIChBX1BBR0FSIC8gQV9SRUNFQkVSKVxyXG4gICAgICAgIGZpbGlhbDogdHJhbnNhY3Rpb24uYnJhbmNoLCAgICAgICAgICAgICAvLyBwcmVzZXJ2YSBmaWxpYWxcclxuICAgICAgICBzb3VyY2VGaWxlOiB0cmFuc2FjdGlvbi5zb3VyY2VGaWxlICAgICAgLy8gbm9tZSBvcmlnaW5hbCBkbyBhcnF1aXZvXHJcbiAgICAgIH0pKVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBDYWNoZSBkb3MgZGFkb3MgcHJvY2Vzc2Fkb3MgcGFyYSBleHBvcnRhw6fDo28gcG9zdGVyaW9yIHNlbSBwcmVjaXNhciByZWVudmlhciBwZWxvIGZyb250ZW5kXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBjYWNoZVBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgJ2xhc3RfcHJvY2Vzc2VkLmpzb24nKTtcclxuICAgICAgZnMud3JpdGVGaWxlU3luYyhjYWNoZVBhdGgsIEpTT04uc3RyaW5naWZ5KHByb2Nlc3NlZERhdGEsIG51bGwsIDIpLCAndXRmOCcpO1xyXG4gICAgfSBjYXRjaCAoY2FjaGVFcnIpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdOw6NvIGZvaSBwb3Nzw612ZWwgc2FsdmFyIGNhY2hlIGRlIHByb2Nlc3NlZERhdGE6JywgY2FjaGVFcnIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6IGAke2NzdkZpbGVzLmxlbmd0aH0gYXJxdWl2byhzKSBwcm9jZXNzYWRvKHMpIGNvbSBzdWNlc3NvYCxcclxuICAgICAgZGF0YTogcHJvY2Vzc2VkRGF0YSxcclxuICAgICAgYWxsRmlsZXNEYXRhXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignPT09IEVSUk9SIElOIFVQTE9BRC1DU1YgPT09Jyk7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB0eXBlOicsIHR5cGVvZiBlcnJvcik7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtZXNzYWdlOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSk7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdGFjazonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiAnTm8gc3RhY2sgdHJhY2UnKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Z1bGwgZXJyb3Igb2JqZWN0OicsIGVycm9yKTtcclxuICAgIFxyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcclxuICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICBtZXNzYWdlOiAnRXJybyBpbnRlcm5vIGRvIHNlcnZpZG9yOiAnICsgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSlcclxuICAgIH0pXHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbImZvcm1pZGFibGUiLCJmcyIsIlBhcGEiLCJwYXRoIiwicGFyc2VDU1ZEYXRlIiwiZGF0ZVN0ciIsImZvcm1hdHMiLCJmb3JtYXQiLCJtYXRjaCIsIkRhdGUiLCJwYXJzZUludCIsImdldFdlZWtCb3VuZGFyaWVzIiwiZGF0ZSIsImRheU9mV2VlayIsImdldERheSIsIndlZWtTdGFydCIsInNldERhdGUiLCJnZXREYXRlIiwic2V0SG91cnMiLCJ3ZWVrRW5kIiwicGFyc2VNb25ldGFyeVZhbHVlIiwic3RyIiwiY2xlYW5WYWx1ZSIsInJlcGxhY2UiLCJpc05lZ2F0aXZlIiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsInZhbHVlIiwicGFyc2VGbG9hdCIsImRldGVjdEVuY29kaW5nIiwiYnVmZmVyIiwiZW5jb2RpbmdzIiwiZW5jb2RpbmciLCJkZWNvZGVkIiwidG9TdHJpbmciLCJpbmNsdWRlcyIsImVycm9yIiwiZXh0cmFpclRyYW5zYWNpb25hZG9yRURvY3VtZW50byIsImNzdkNvbnRlbnQiLCJkb2N1bWVudFR5cGUiLCJub21lRmlsaWFsIiwicGFyc2VSZXN1bHQiLCJwYXJzZSIsImhlYWRlciIsInNraXBFbXB0eUxpbmVzIiwicm93cyIsImRhdGEiLCJkb2N1bWVudG9zRXh0cmFpZG9zIiwicm93IiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiY2F0ZWdvcnkiLCJ0cmltIiwidHJhbnNhY2lvbmFkb3IiLCJudW1lcm9Eb2N1bWVudG8iLCJ2YWx1ZVN0ciIsImlzTmFOIiwiZ2V0VGltZSIsInRyYW5zYWNpb25hZG9yRmluYWwiLCJudW1lcm9Eb2N1bWVudG9GaW5hbCIsInB1c2giLCJkYXRhVmVuY2ltZW50byIsInZhbG9yIiwidmFsb3JPcmlnaW5hbCIsImNhdGVnb3JpYSIsImZpbGlhbCIsInNvdXJjZUZpbGUiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiY29uc29sZSIsImxvZyIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwidGVtcERpciIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJmb3JtIiwidXBsb2FkRGlyIiwia2VlcEV4dGVuc2lvbnMiLCJtYXhGaWxlcyIsIm1heEZpbGVTaXplIiwiZmllbGRzIiwiZmlsZXMiLCJPYmplY3QiLCJrZXlzIiwic2VsZWN0ZWRUeXBlcyIsImRvY3VtZW50VHlwZXMiLCJkb2N1bWVudFR5cGVzU3RyaW5nIiwicGFyc2VkIiwiYWxsVHlwZXMiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwidHlwZUFycmF5IiwidW5pcXVlVHlwZXMiLCJmcm9tIiwiU2V0IiwiZSIsImFsbEZpbGVzIiwiZmxhdCIsImZpbHRlciIsIkJvb2xlYW4iLCJtYXAiLCJmIiwib3JpZ2luYWxGaWxlbmFtZSIsImZpbGVwYXRoIiwiY3N2RmlsZXMiLCJmaWxlIiwibWltZXR5cGUiLCJzaXplIiwidGVzdCIsIm5hbWUiLCJ0eXBlIiwic3VjY2VzcyIsImFsbFRyYW5zYWN0aW9ucyIsImFsbEZpbGVzRGF0YSIsInJlYWRGaWxlU3luYyIsImJyYW5jaE5hbWUiLCJ0b1VwcGVyQ2FzZSIsImZpbGVUcmFuc2FjdGlvbnMiLCJzbGljZSIsImRvYyIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInRyYW5zYWN0aW9uIiwic3VwcGxpZXIiLCJkb2NOdW1iZXIiLCJicmFuY2giLCJmaWxlbmFtZSIsInRyYW5zYWN0aW9ucyIsInRvdGFsVHJhbnNhY3Rpb25zIiwidW5saW5rU3luYyIsInByb2Nlc3NGaWxlRXJyIiwiYnJhbmNoVG90YWxzTWFwIiwiTWFwIiwiZGFpbHlUb3RhbHNNYXAiLCJ0b3RhbFBheWFibGUiLCJ0b3RhbFJlY2VpdmFibGUiLCJncmFuZFRvdGFsVmFsdWUiLCJicmFuY2hLZXkiLCJoYXMiLCJzZXQiLCJpbnZvaWNlQ291bnQiLCJ0b3RhbFZhbHVlIiwiYnJhbmNoVG90YWwiLCJnZXQiLCJkYXRlS2V5IiwidG9JU09TdHJpbmciLCJzcGxpdCIsImRhaWx5VG90YWwiLCJicmFuY2hUb3RhbHMiLCJlbnRyaWVzIiwidG9Mb2NhbGVTdHJpbmciLCJtaW5pbXVtRnJhY3Rpb25EaWdpdHMiLCJkYWlseVRvdGFscyIsIndvcmtpbmdEYXlzVG90YWwiLCJkIiwicmVkdWNlIiwic3VtIiwid2Vla2VuZFRvdGFsIiwid29ya2luZ0RheXMiLCJ3ZWVrZW5kRGF5cyIsIm1pbkRhdGUiLCJNYXRoIiwibWluIiwidCIsIm1heERhdGUiLCJtYXgiLCJwcm9jZXNzZWREYXRhIiwid2Vla2x5VG90YWxzIiwid2Vla1RvdGFsIiwid2Vla1BlcmlvZCIsImdyYW5kVG90YWwiLCJ0b3RhbEludm9pY2VzIiwidmVuY2ltZW50byIsImRvY3VtZW50byIsInZhbG9yTnVtZXJpY28iLCJjYWNoZVBhdGgiLCJqb2luIiwid3JpdGVGaWxlU3luYyIsImNhY2hlRXJyIiwid2FybiIsIkVycm9yIiwiU3RyaW5nIiwic3RhY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/upload-csv.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-csv&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload-csv.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();