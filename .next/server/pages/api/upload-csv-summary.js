"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/upload-csv-summary";
exports.ids = ["pages/api/upload-csv-summary"];
exports.modules = {

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("multer");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "papaparse":
/*!****************************!*\
  !*** external "papaparse" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("papaparse");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-csv-summary&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload-csv-summary.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-csv-summary&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload-csv-summary.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_upload_csv_summary_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\upload-csv-summary.ts */ \"(api)/./pages/api/upload-csv-summary.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_csv_summary_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_csv_summary_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/upload-csv-summary\",\n        pathname: \"/api/upload-csv-summary\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_upload_csv_summary_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwbG9hZC1jc3Ytc3VtbWFyeSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDdXBsb2FkLWNzdi1zdW1tYXJ5LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2dFO0FBQ2hFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyw2REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsNkRBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbm90YWZsZXgtbmV4dGpzLz8xNWUzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcdXBsb2FkLWNzdi1zdW1tYXJ5LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXBsb2FkLWNzdi1zdW1tYXJ5XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXBsb2FkLWNzdi1zdW1tYXJ5XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-csv-summary&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload-csv-summary.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/storage.ts":
/*!************************!*\
  !*** ./lib/storage.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   storage: () => (/* binding */ storage)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n// lib/storage.ts\n\n\nclass PersistentStorage {\n    constructor(){\n        this.data = {};\n        this.filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"temp\", \"storage_cache.json\");\n        this.ensureDirectoryExists();\n        this.loadFromFile();\n    }\n    ensureDirectoryExists() {\n        const dir = path__WEBPACK_IMPORTED_MODULE_1___default().dirname(this.filePath);\n        if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(dir)) {\n            fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(dir, {\n                recursive: true\n            });\n        }\n    }\n    loadFromFile() {\n        try {\n            if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(this.filePath)) {\n                const content = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(this.filePath, \"utf-8\");\n                this.data = JSON.parse(content);\n                console.log(\"[STORAGE] Dados carregados do cache:\", Object.keys(this.data));\n            }\n        } catch (error) {\n            console.warn(\"[STORAGE] Erro ao carregar cache:\", error);\n            this.data = {};\n        }\n    }\n    saveToFile() {\n        try {\n            fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(this.filePath, JSON.stringify(this.data, null, 2));\n            console.log(\"[STORAGE] Dados salvos no cache:\", Object.keys(this.data));\n        } catch (error) {\n            console.warn(\"[STORAGE] Erro ao salvar cache:\", error);\n        }\n    }\n    get(key) {\n        return this.data[key];\n    }\n    set(key, value) {\n        this.data[key] = value;\n        this.saveToFile();\n        console.log(`[STORAGE] Definido ${key}:`, typeof value === \"object\" ? JSON.stringify(value).substring(0, 100) + \"...\" : value);\n    }\n    delete(key) {\n        delete this.data[key];\n        this.saveToFile();\n    }\n    keys() {\n        return Object.keys(this.data);\n    }\n    clear() {\n        this.data = {};\n        this.saveToFile();\n    }\n}\n// Criar instância singleton\nconst persistentStorage = new PersistentStorage();\n// Proxy para manter compatibilidade com sintaxe de array\nconst storage = new Proxy(persistentStorage, {\n    get (target, prop) {\n        if (typeof prop === \"string\") {\n            // Se for um método da classe, retornar o método\n            if (typeof target[prop] === \"function\") {\n                return target[prop].bind(target);\n            }\n            // Caso contrário, tratar como chave de dados\n            return target.get(prop);\n        }\n        return target[prop];\n    },\n    set (target, prop, value) {\n        if (typeof prop === \"string\") {\n            target.set(prop, value);\n            return true;\n        }\n        return false;\n    },\n    deleteProperty (target, prop) {\n        if (typeof prop === \"string\") {\n            target.delete(prop);\n            return true;\n        }\n        return false;\n    },\n    ownKeys (target) {\n        return target.keys();\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjtJQUNBVCxLQUFJUSxNQUFNLEVBQUVDLElBQXFCLEVBQUVSLEtBQUs7UUFDdEMsSUFBSSxPQUFPUSxTQUFTLFVBQVU7WUFDNUJELE9BQU9SLEdBQUcsQ0FBQ1MsTUFBTVI7WUFDakIsT0FBTztRQUNUO1FBQ0EsT0FBTztJQUNUO0lBQ0FVLGdCQUFlSCxNQUFNLEVBQUVDLElBQXFCO1FBQzFDLElBQUksT0FBT0EsU0FBUyxVQUFVO1lBQzVCRCxPQUFPTCxNQUFNLENBQUNNO1lBQ2QsT0FBTztRQUNUO1FBQ0EsT0FBTztJQUNUO0lBQ0FHLFNBQVFKLE1BQU07UUFDWixPQUFPQSxPQUFPaEIsSUFBSTtJQUNwQjtBQUNGLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub3RhZmxleC1uZXh0anMvLi9saWIvc3RvcmFnZS50cz81ZGM4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGxpYi9zdG9yYWdlLnRzXHJcbmltcG9ydCBmcyBmcm9tICdmcyc7XHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5cclxuaW50ZXJmYWNlIFN0b3JhZ2VEYXRhIHtcclxuICBba2V5OiBzdHJpbmddOiBhbnk7XHJcbn1cclxuXHJcbmNsYXNzIFBlcnNpc3RlbnRTdG9yYWdlIHtcclxuICBwcml2YXRlIGRhdGE6IFN0b3JhZ2VEYXRhID0ge307XHJcbiAgcHJpdmF0ZSBmaWxlUGF0aDogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZmlsZVBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3RlbXAnLCAnc3RvcmFnZV9jYWNoZS5qc29uJyk7XHJcbiAgICB0aGlzLmVuc3VyZURpcmVjdG9yeUV4aXN0cygpO1xyXG4gICAgdGhpcy5sb2FkRnJvbUZpbGUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZW5zdXJlRGlyZWN0b3J5RXhpc3RzKCkge1xyXG4gICAgY29uc3QgZGlyID0gcGF0aC5kaXJuYW1lKHRoaXMuZmlsZVBhdGgpO1xyXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGRpcikpIHtcclxuICAgICAgZnMubWtkaXJTeW5jKGRpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGxvYWRGcm9tRmlsZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChmcy5leGlzdHNTeW5jKHRoaXMuZmlsZVBhdGgpKSB7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IGZzLnJlYWRGaWxlU3luYyh0aGlzLmZpbGVQYXRoLCAndXRmLTgnKTtcclxuICAgICAgICB0aGlzLmRhdGEgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbU1RPUkFHRV0gRGFkb3MgY2FycmVnYWRvcyBkbyBjYWNoZTonLCBPYmplY3Qua2V5cyh0aGlzLmRhdGEpKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdbU1RPUkFHRV0gRXJybyBhbyBjYXJyZWdhciBjYWNoZTonLCBlcnJvcik7XHJcbiAgICAgIHRoaXMuZGF0YSA9IHt9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzYXZlVG9GaWxlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgZnMud3JpdGVGaWxlU3luYyh0aGlzLmZpbGVQYXRoLCBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEsIG51bGwsIDIpKTtcclxuICAgICAgY29uc29sZS5sb2coJ1tTVE9SQUdFXSBEYWRvcyBzYWx2b3Mgbm8gY2FjaGU6JywgT2JqZWN0LmtleXModGhpcy5kYXRhKSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tTVE9SQUdFXSBFcnJvIGFvIHNhbHZhciBjYWNoZTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQoa2V5OiBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGFba2V5XTtcclxuICB9XHJcblxyXG4gIHNldChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkge1xyXG4gICAgdGhpcy5kYXRhW2tleV0gPSB2YWx1ZTtcclxuICAgIHRoaXMuc2F2ZVRvRmlsZSgpO1xyXG4gICAgY29uc29sZS5sb2coYFtTVE9SQUdFXSBEZWZpbmlkbyAke2tleX06YCwgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KHZhbHVlKS5zdWJzdHJpbmcoMCwgMTAwKSArICcuLi4nIDogdmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlKGtleTogc3RyaW5nKSB7XHJcbiAgICBkZWxldGUgdGhpcy5kYXRhW2tleV07XHJcbiAgICB0aGlzLnNhdmVUb0ZpbGUoKTtcclxuICB9XHJcblxyXG4gIGtleXMoKSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5kYXRhKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCkge1xyXG4gICAgdGhpcy5kYXRhID0ge307XHJcbiAgICB0aGlzLnNhdmVUb0ZpbGUoKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIENyaWFyIGluc3TDom5jaWEgc2luZ2xldG9uXHJcbmNvbnN0IHBlcnNpc3RlbnRTdG9yYWdlID0gbmV3IFBlcnNpc3RlbnRTdG9yYWdlKCk7XHJcblxyXG4vLyBQcm94eSBwYXJhIG1hbnRlciBjb21wYXRpYmlsaWRhZGUgY29tIHNpbnRheGUgZGUgYXJyYXlcclxuZXhwb3J0IGNvbnN0IHN0b3JhZ2UgPSBuZXcgUHJveHkocGVyc2lzdGVudFN0b3JhZ2UsIHtcclxuICBnZXQodGFyZ2V0LCBwcm9wOiBzdHJpbmcgfCBzeW1ib2wpIHtcclxuICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgLy8gU2UgZm9yIHVtIG3DqXRvZG8gZGEgY2xhc3NlLCByZXRvcm5hciBvIG3DqXRvZG9cclxuICAgICAgaWYgKHR5cGVvZiAodGFyZ2V0IGFzIGFueSlbcHJvcF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICByZXR1cm4gKHRhcmdldCBhcyBhbnkpW3Byb3BdLmJpbmQodGFyZ2V0KTtcclxuICAgICAgfVxyXG4gICAgICAvLyBDYXNvIGNvbnRyw6FyaW8sIHRyYXRhciBjb21vIGNoYXZlIGRlIGRhZG9zXHJcbiAgICAgIHJldHVybiB0YXJnZXQuZ2V0KHByb3ApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICh0YXJnZXQgYXMgYW55KVtwcm9wXTtcclxuICB9LFxyXG4gIHNldCh0YXJnZXQsIHByb3A6IHN0cmluZyB8IHN5bWJvbCwgdmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdGFyZ2V0LnNldChwcm9wLCB2YWx1ZSk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0sXHJcbiAgZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBwcm9wOiBzdHJpbmcgfCBzeW1ib2wpIHtcclxuICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdGFyZ2V0LmRlbGV0ZShwcm9wKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSxcclxuICBvd25LZXlzKHRhcmdldCkge1xyXG4gICAgcmV0dXJuIHRhcmdldC5rZXlzKCk7XHJcbiAgfVxyXG59KTtcclxuIl0sIm5hbWVzIjpbImZzIiwicGF0aCIsIlBlcnNpc3RlbnRTdG9yYWdlIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiZmlsZVBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImVuc3VyZURpcmVjdG9yeUV4aXN0cyIsImxvYWRGcm9tRmlsZSIsImRpciIsImRpcm5hbWUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwiY29udGVudCIsInJlYWRGaWxlU3luYyIsIkpTT04iLCJwYXJzZSIsImNvbnNvbGUiLCJsb2ciLCJPYmplY3QiLCJrZXlzIiwiZXJyb3IiLCJ3YXJuIiwic2F2ZVRvRmlsZSIsIndyaXRlRmlsZVN5bmMiLCJzdHJpbmdpZnkiLCJnZXQiLCJrZXkiLCJzZXQiLCJ2YWx1ZSIsInN1YnN0cmluZyIsImRlbGV0ZSIsImNsZWFyIiwicGVyc2lzdGVudFN0b3JhZ2UiLCJzdG9yYWdlIiwiUHJveHkiLCJ0YXJnZXQiLCJwcm9wIiwiYmluZCIsImRlbGV0ZVByb3BlcnR5Iiwib3duS2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/storage.ts\n");

/***/ }),

/***/ "(api)/./pages/api/upload-csv-summary.ts":
/*!*****************************************!*\
  !*** ./pages/api/upload-csv-summary.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var papaparse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! papaparse */ \"papaparse\");\n/* harmony import */ var papaparse__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(papaparse__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/storage */ \"(api)/./lib/storage.ts\");\n\n\n\n// Configuração Multer (memória)\nconst upload = multer__WEBPACK_IMPORTED_MODULE_0___default()({\n    storage: multer__WEBPACK_IMPORTED_MODULE_0___default().memoryStorage(),\n    limits: {\n        fileSize: 50 * 1024 * 1024,\n        files: 15\n    }\n});\n// Helpers\nconst isMonetaryValue = (val)=>{\n    if (typeof val !== \"string\") return false;\n    const t = val.trim();\n    return /^R\\$\\s*[\\d\\.]{1,15},\\d{2}$/.test(t) || /^R\\$\\s*\\d+,\\d{2}$/.test(t) || /^R\\$\\s*\\d+$/.test(t);\n};\nconst parseMonetary = (val)=>{\n    let c = val.replace(/R\\$|\\s/g, \"\").trim();\n    if (c.includes(\".\") && c.includes(\",\")) c = c.replace(/\\./g, \"\").replace(\",\", \".\");\n    else if (c.includes(\",\")) c = c.replace(\",\", \".\");\n    return parseFloat(c) || 0;\n};\nconst runMiddleware = (req, res, fn)=>new Promise((resolve, reject)=>{\n        fn(req, res, (result)=>{\n            if (result instanceof Error) return reject(result);\n            return resolve(result);\n        });\n    });\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nasync function handler(req, res) {\n    if (req.method !== \"POST\") return res.status(405).json({\n        success: false,\n        message: \"M\\xe9todo n\\xe3o permitido\"\n    });\n    try {\n        await runMiddleware(req, res, upload.array(\"files\", 15));\n        const files = req.files;\n        if (!files || files.length === 0) return res.status(400).json({\n            success: false,\n            message: \"Nenhum arquivo enviado\"\n        });\n        const branches = [];\n        let grandTotalAPagar = 0;\n        let grandTotalAReceber = 0;\n        const globalDateTotals = new Map();\n        const dateRegex = /^(\\d{2})\\/(\\d{2})\\/(\\d{4})$/;\n        for (const file of files){\n            const content = file.buffer.toString(\"utf-8\");\n            const { data } = papaparse__WEBPACK_IMPORTED_MODULE_1___default().parse(content, {\n                header: false,\n                delimiter: \";\",\n                skipEmptyLines: \"greedy\"\n            });\n            const rows = data;\n            let branchName = file.originalname.replace(/\\.(csv|CSV)$/, \"\").trim();\n            if (rows[0] && rows[0][0]) {\n                const firstCell = rows[0][0].toString().trim();\n                if (firstCell) branchName = firstCell;\n            }\n            let totalAPagar = 0;\n            let totalAReceber = 0;\n            let currentSection = null;\n            const branchDateTotals = new Map();\n            for (const rawRow of rows){\n                if (!Array.isArray(rawRow)) continue;\n                const row = [\n                    ...rawRow\n                ];\n                while(row.length && (row[row.length - 1] === \"\" || row[row.length - 1] == null))row.pop();\n                if (!row.length) continue;\n                const upperJoin = row.map((c)=>(c || \"\").toString().toUpperCase()).join(\" \");\n                if (upperJoin.startsWith(\"CONTAS A PAGAR\")) {\n                    currentSection = \"A_PAGAR\";\n                    continue;\n                }\n                if (upperJoin.startsWith(\"CONTAS A RECEBER\")) {\n                    currentSection = \"A_RECEBER\";\n                    continue;\n                }\n                const normalizedCells = row.map((c)=>(c || \"\").toString().trim());\n                const upperCells = normalizedCells.map((c)=>c.toUpperCase());\n                if (upperCells.some((c)=>c.startsWith(\"TOTAL CONTAS A PAGAR\"))) {\n                    const monetary = normalizedCells.find((c)=>c.includes(\"R$\")) || normalizedCells[normalizedCells.length - 1];\n                    if (monetary && isMonetaryValue(monetary)) totalAPagar = parseMonetary(monetary);\n                    continue;\n                }\n                if (upperCells.some((c)=>c.startsWith(\"TOTAL CONTAS A RECEBER\"))) {\n                    const monetary = normalizedCells.find((c)=>c.includes(\"R$\")) || normalizedCells[normalizedCells.length - 1];\n                    if (monetary && isMonetaryValue(monetary)) totalAReceber = parseMonetary(monetary);\n                    continue;\n                }\n                // Ignorar subtotais parciais (linhas com apenas 'TOTAL' + valor) - detectamos se só há uma célula 'TOTAL'\n                if (upperCells.filter((c)=>c === \"TOTAL\").length === 1 && normalizedCells.length <= 5 && normalizedCells.some((c)=>c.includes(\"R$\"))) {\n                    continue;\n                }\n                // Transações (A PAGAR) com data na primeira coluna\n                const dateCell = normalizedCells[0];\n                if (currentSection === \"A_PAGAR\" && dateRegex.test(dateCell)) {\n                    const valueCell = normalizedCells[3]; // Vencimento;Transacionador;Documento;Valor\n                    if (valueCell && isMonetaryValue(valueCell)) {\n                        const valNum = parseMonetary(valueCell);\n                        if (valNum) {\n                            branchDateTotals.set(dateCell, (branchDateTotals.get(dateCell) || 0) + valNum);\n                            globalDateTotals.set(dateCell, (globalDateTotals.get(dateCell) || 0) + valNum);\n                        }\n                    }\n                }\n            }\n            if (totalAPagar === 0 && branchDateTotals.size) {\n                totalAPagar = Array.from(branchDateTotals.values()).reduce((a, b)=>a + b, 0);\n            }\n            branches.push({\n                name: branchName,\n                totalAPagar,\n                totalAReceber,\n                total: totalAPagar + totalAReceber\n            });\n            grandTotalAPagar += totalAPagar;\n            grandTotalAReceber += totalAReceber;\n        }\n        const dateSpecificTotals = Array.from(globalDateTotals.entries()).map(([day, total])=>({\n                day,\n                total\n            })).sort((a, b)=>{\n            const pa = a.day.split(\"/\");\n            const pb = b.day.split(\"/\");\n            const da = new Date(parseInt(pa[2]), parseInt(pa[1]) - 1, parseInt(pa[0]));\n            const db = new Date(parseInt(pb[2]), parseInt(pb[1]) - 1, parseInt(pb[0]));\n            return da.getTime() - db.getTime();\n        });\n        const summaryData = {\n            branches,\n            grandTotal: grandTotalAPagar + grandTotalAReceber,\n            grandTotalAPagar,\n            grandTotalAReceber,\n            dateSpecificTotals,\n            generatedAt: new Date().toISOString()\n        };\n        console.log(\"[UPLOAD] Salvando summaryData no storage:\", {\n            branches: summaryData.branches.length,\n            grandTotal: summaryData.grandTotal,\n            dateSpecificTotals: summaryData.dateSpecificTotals.length\n        });\n        _lib_storage__WEBPACK_IMPORTED_MODULE_2__.storage[\"summaryData\"] = summaryData;\n        console.log(\"[UPLOAD] Dados salvos no storage:\", {\n            branches: summaryData.branches.length,\n            grandTotal: summaryData.grandTotal,\n            dateSpecificTotals: Object.keys(summaryData.dateSpecificTotals || {}).length\n        });\n        console.log(\"[UPLOAD] Verifica\\xe7\\xe3o de dados salvos:\", !!_lib_storage__WEBPACK_IMPORTED_MODULE_2__.storage[\"summaryData\"]);\n        return res.status(200).json({\n            success: true,\n            message: `${files.length} arquivo(s) processado(s) com sucesso`,\n            data: summaryData\n        });\n    } catch (e) {\n        console.error(\"Erro upload-csv-summary:\", e);\n        return res.status(500).json({\n            success: false,\n            message: \"Erro interno do servidor\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWtCLENBQUN0RCxNQUFNO1FBQzNEO1FBRUNuQyxpREFBZSxDQUFDLGNBQWMsR0FBR3FHO1FBRWxDSSxRQUFRQyxHQUFHLENBQUMscUNBQXFDO1lBQy9DdEUsVUFBVWlFLFlBQVlqRSxRQUFRLENBQUNELE1BQU07WUFDckNtRSxZQUFZRCxZQUFZQyxVQUFVO1lBQ2xDYixvQkFBb0JrQixPQUFPQyxJQUFJLENBQUNQLFlBQVlaLGtCQUFrQixJQUFJLENBQUMsR0FBR3RELE1BQU07UUFDOUU7UUFDQXNFLFFBQVFDLEdBQUcsQ0FBQywrQ0FBeUMsQ0FBQyxDQUFDLGlEQUFnQixDQUFDLGNBQWM7UUFFdEYsT0FBT3hGLElBQUlZLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztZQUFNQyxTQUFTLENBQUMsRUFBRTVCLE1BQU04QixNQUFNLENBQUMscUNBQXFDLENBQUM7WUFBRVcsTUFBTXVEO1FBQVk7SUFDbEksRUFBRSxPQUFPUSxHQUFRO1FBQ2ZKLFFBQVFLLEtBQUssQ0FBQyw0QkFBNEJEO1FBQzFDLE9BQU8zRixJQUFJWSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7WUFBT0MsU0FBUztRQUEyQjtJQUNwRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbm90YWZsZXgtbmV4dGpzLy4vcGFnZXMvYXBpL3VwbG9hZC1jc3Ytc3VtbWFyeS50cz8xMWUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xyXG5pbXBvcnQgUGFwYSBmcm9tICdwYXBhcGFyc2UnO1xyXG5pbXBvcnQgeyBzdG9yYWdlIH0gZnJvbSAnLi4vLi4vbGliL3N0b3JhZ2UnO1xyXG5cclxuLy8gQ29uZmlndXJhw6fDo28gTXVsdGVyIChtZW3Ds3JpYSlcclxuY29uc3QgdXBsb2FkID0gbXVsdGVyKHtcclxuICBzdG9yYWdlOiBtdWx0ZXIubWVtb3J5U3RvcmFnZSgpLFxyXG4gIGxpbWl0czogeyBmaWxlU2l6ZTogNTAgKiAxMDI0ICogMTAyNCwgZmlsZXM6IDE1IH1cclxufSk7XHJcblxyXG4vLyBIZWxwZXJzXHJcbmNvbnN0IGlzTW9uZXRhcnlWYWx1ZSA9ICh2YWw6IGFueSk6IGJvb2xlYW4gPT4ge1xyXG4gIGlmICh0eXBlb2YgdmFsICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlO1xyXG4gIGNvbnN0IHQgPSB2YWwudHJpbSgpO1xyXG4gIHJldHVybiAvXlJcXCRcXHMqW1xcZFxcLl17MSwxNX0sXFxkezJ9JC8udGVzdCh0KSB8fCAvXlJcXCRcXHMqXFxkKyxcXGR7Mn0kLy50ZXN0KHQpIHx8IC9eUlxcJFxccypcXGQrJC8udGVzdCh0KTtcclxufTtcclxuXHJcbmNvbnN0IHBhcnNlTW9uZXRhcnkgPSAodmFsOiBzdHJpbmcpOiBudW1iZXIgPT4ge1xyXG4gIGxldCBjID0gdmFsLnJlcGxhY2UoL1JcXCR8XFxzL2csJycpLnRyaW0oKTtcclxuICBpZiAoYy5pbmNsdWRlcygnLicpICYmIGMuaW5jbHVkZXMoJywnKSkgYyA9IGMucmVwbGFjZSgvXFwuL2csJycpLnJlcGxhY2UoJywnLCAnLicpO1xyXG4gIGVsc2UgaWYgKGMuaW5jbHVkZXMoJywnKSkgYyA9IGMucmVwbGFjZSgnLCcsICcuJyk7XHJcbiAgcmV0dXJuIHBhcnNlRmxvYXQoYykgfHwgMDtcclxufTtcclxuXHJcbmNvbnN0IHJ1bk1pZGRsZXdhcmUgPSAocmVxOiBhbnksIHJlczogYW55LCBmbjogYW55KSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgZm4ocmVxLCByZXMsIChyZXN1bHQ6IGFueSkgPT4ge1xyXG4gICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gcmVqZWN0KHJlc3VsdCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZShyZXN1bHQpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7IGFwaTogeyBib2R5UGFyc2VyOiBmYWxzZSB9IH07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdNw6l0b2RvIG7Do28gcGVybWl0aWRvJyB9KTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IHJ1bk1pZGRsZXdhcmUocmVxLCByZXMsIHVwbG9hZC5hcnJheSgnZmlsZXMnLCAxNSkpO1xyXG4gICAgY29uc3QgZmlsZXMgPSAocmVxIGFzIGFueSkuZmlsZXMgYXMgRXhwcmVzcy5NdWx0ZXIuRmlsZVtdO1xyXG4gICAgaWYgKCFmaWxlcyB8fCBmaWxlcy5sZW5ndGggPT09IDApIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnTmVuaHVtIGFycXVpdm8gZW52aWFkbycgfSk7XHJcblxyXG4gICAgY29uc3QgYnJhbmNoZXM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyB0b3RhbEFQYWdhcjogbnVtYmVyOyB0b3RhbEFSZWNlYmVyOiBudW1iZXI7IHRvdGFsOiBudW1iZXIgfT4gPSBbXTtcclxuICAgIGxldCBncmFuZFRvdGFsQVBhZ2FyID0gMDtcclxuICAgIGxldCBncmFuZFRvdGFsQVJlY2ViZXIgPSAwO1xyXG4gICAgY29uc3QgZ2xvYmFsRGF0ZVRvdGFsczogTWFwPHN0cmluZywgbnVtYmVyPiA9IG5ldyBNYXAoKTtcclxuICAgIGNvbnN0IGRhdGVSZWdleCA9IC9eKFxcZHsyfSlcXC8oXFxkezJ9KVxcLyhcXGR7NH0pJC87XHJcblxyXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBmaWxlLmJ1ZmZlci50b1N0cmluZygndXRmLTgnKTtcclxuICAgICAgY29uc3QgeyBkYXRhIH0gPSBQYXBhLnBhcnNlKGNvbnRlbnQsIHsgaGVhZGVyOiBmYWxzZSwgZGVsaW1pdGVyOiAnOycsIHNraXBFbXB0eUxpbmVzOiAnZ3JlZWR5JyB9KTtcclxuICAgICAgY29uc3Qgcm93cyA9IGRhdGEgYXMgYW55W107XHJcblxyXG4gICAgICBsZXQgYnJhbmNoTmFtZSA9IGZpbGUub3JpZ2luYWxuYW1lLnJlcGxhY2UoL1xcLihjc3Z8Q1NWKSQvLCcnKS50cmltKCk7XHJcbiAgICAgIGlmIChyb3dzWzBdICYmIHJvd3NbMF1bMF0pIHtcclxuICAgICAgICBjb25zdCBmaXJzdENlbGwgPSByb3dzWzBdWzBdLnRvU3RyaW5nKCkudHJpbSgpO1xyXG4gICAgICAgIGlmIChmaXJzdENlbGwpIGJyYW5jaE5hbWUgPSBmaXJzdENlbGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB0b3RhbEFQYWdhciA9IDA7XHJcbiAgICAgIGxldCB0b3RhbEFSZWNlYmVyID0gMDtcclxuICAgICAgbGV0IGN1cnJlbnRTZWN0aW9uOiAnQV9QQUdBUicgfCAnQV9SRUNFQkVSJyB8IG51bGwgPSBudWxsO1xyXG4gICAgICBjb25zdCBicmFuY2hEYXRlVG90YWxzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgICAgZm9yIChjb25zdCByYXdSb3cgb2Ygcm93cykge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShyYXdSb3cpKSBjb250aW51ZTtcclxuICAgICAgICBjb25zdCByb3cgPSBbLi4ucmF3Um93XTtcclxuICAgICAgICB3aGlsZSAocm93Lmxlbmd0aCAmJiAocm93W3Jvdy5sZW5ndGgtMV0gPT09ICcnIHx8IHJvd1tyb3cubGVuZ3RoLTFdID09IG51bGwpKSByb3cucG9wKCk7XHJcbiAgICAgICAgaWYgKCFyb3cubGVuZ3RoKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgY29uc3QgdXBwZXJKb2luID0gcm93Lm1hcChjID0+IChjfHwnJykudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpKS5qb2luKCcgJyk7XHJcbiAgICAgICAgaWYgKHVwcGVySm9pbi5zdGFydHNXaXRoKCdDT05UQVMgQSBQQUdBUicpKSB7IGN1cnJlbnRTZWN0aW9uID0gJ0FfUEFHQVInOyBjb250aW51ZTsgfVxyXG4gICAgICAgIGlmICh1cHBlckpvaW4uc3RhcnRzV2l0aCgnQ09OVEFTIEEgUkVDRUJFUicpKSB7IGN1cnJlbnRTZWN0aW9uID0gJ0FfUkVDRUJFUic7IGNvbnRpbnVlOyB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRDZWxscyA9IHJvdy5tYXAoYyA9PiAoY3x8JycpLnRvU3RyaW5nKCkudHJpbSgpKTtcclxuICAgICAgICBjb25zdCB1cHBlckNlbGxzID0gbm9ybWFsaXplZENlbGxzLm1hcChjID0+IGMudG9VcHBlckNhc2UoKSk7XHJcblxyXG4gICAgICAgIGlmICh1cHBlckNlbGxzLnNvbWUoYyA9PiBjLnN0YXJ0c1dpdGgoJ1RPVEFMIENPTlRBUyBBIFBBR0FSJykpKSB7XHJcbiAgICAgICAgICBjb25zdCBtb25ldGFyeSA9IG5vcm1hbGl6ZWRDZWxscy5maW5kKGMgPT4gYy5pbmNsdWRlcygnUiQnKSkgfHwgbm9ybWFsaXplZENlbGxzW25vcm1hbGl6ZWRDZWxscy5sZW5ndGgtMV07XHJcbiAgICAgICAgICBpZiAobW9uZXRhcnkgJiYgaXNNb25ldGFyeVZhbHVlKG1vbmV0YXJ5KSkgdG90YWxBUGFnYXIgPSBwYXJzZU1vbmV0YXJ5KG1vbmV0YXJ5KTtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXBwZXJDZWxscy5zb21lKGMgPT4gYy5zdGFydHNXaXRoKCdUT1RBTCBDT05UQVMgQSBSRUNFQkVSJykpKSB7XHJcbiAgICAgICAgICBjb25zdCBtb25ldGFyeSA9IG5vcm1hbGl6ZWRDZWxscy5maW5kKGMgPT4gYy5pbmNsdWRlcygnUiQnKSkgfHwgbm9ybWFsaXplZENlbGxzW25vcm1hbGl6ZWRDZWxscy5sZW5ndGgtMV07XHJcbiAgICAgICAgICBpZiAobW9uZXRhcnkgJiYgaXNNb25ldGFyeVZhbHVlKG1vbmV0YXJ5KSkgdG90YWxBUmVjZWJlciA9IHBhcnNlTW9uZXRhcnkobW9uZXRhcnkpO1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZ25vcmFyIHN1YnRvdGFpcyBwYXJjaWFpcyAobGluaGFzIGNvbSBhcGVuYXMgJ1RPVEFMJyArIHZhbG9yKSAtIGRldGVjdGFtb3Mgc2Ugc8OzIGjDoSB1bWEgY8OpbHVsYSAnVE9UQUwnXHJcbiAgICAgICAgaWYgKHVwcGVyQ2VsbHMuZmlsdGVyKGMgPT4gYyA9PT0gJ1RPVEFMJykubGVuZ3RoID09PSAxICYmIG5vcm1hbGl6ZWRDZWxscy5sZW5ndGggPD0gNSAmJiBub3JtYWxpemVkQ2VsbHMuc29tZShjID0+IGMuaW5jbHVkZXMoJ1IkJykpKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRyYW5zYcOnw7VlcyAoQSBQQUdBUikgY29tIGRhdGEgbmEgcHJpbWVpcmEgY29sdW5hXHJcbiAgICAgICAgY29uc3QgZGF0ZUNlbGwgPSBub3JtYWxpemVkQ2VsbHNbMF07XHJcbiAgICAgICAgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnQV9QQUdBUicgJiYgZGF0ZVJlZ2V4LnRlc3QoZGF0ZUNlbGwpKSB7XHJcbiAgICAgICAgICBjb25zdCB2YWx1ZUNlbGwgPSBub3JtYWxpemVkQ2VsbHNbM107IC8vIFZlbmNpbWVudG87VHJhbnNhY2lvbmFkb3I7RG9jdW1lbnRvO1ZhbG9yXHJcbiAgICAgICAgICBpZiAodmFsdWVDZWxsICYmIGlzTW9uZXRhcnlWYWx1ZSh2YWx1ZUNlbGwpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbE51bSA9IHBhcnNlTW9uZXRhcnkodmFsdWVDZWxsKTtcclxuICAgICAgICAgICAgaWYgKHZhbE51bSkge1xyXG4gICAgICAgICAgICAgIGJyYW5jaERhdGVUb3RhbHMuc2V0KGRhdGVDZWxsLCAoYnJhbmNoRGF0ZVRvdGFscy5nZXQoZGF0ZUNlbGwpIHx8IDApICsgdmFsTnVtKTtcclxuICAgICAgICAgICAgICBnbG9iYWxEYXRlVG90YWxzLnNldChkYXRlQ2VsbCwgKGdsb2JhbERhdGVUb3RhbHMuZ2V0KGRhdGVDZWxsKSB8fCAwKSArIHZhbE51bSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0b3RhbEFQYWdhciA9PT0gMCAmJiBicmFuY2hEYXRlVG90YWxzLnNpemUpIHtcclxuICAgICAgICB0b3RhbEFQYWdhciA9IEFycmF5LmZyb20oYnJhbmNoRGF0ZVRvdGFscy52YWx1ZXMoKSkucmVkdWNlKChhLGIpPT5hK2IsMCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGJyYW5jaGVzLnB1c2goeyBuYW1lOiBicmFuY2hOYW1lLCB0b3RhbEFQYWdhciwgdG90YWxBUmVjZWJlciwgdG90YWw6IHRvdGFsQVBhZ2FyICsgdG90YWxBUmVjZWJlciB9KTtcclxuICAgICAgZ3JhbmRUb3RhbEFQYWdhciArPSB0b3RhbEFQYWdhcjtcclxuICAgICAgZ3JhbmRUb3RhbEFSZWNlYmVyICs9IHRvdGFsQVJlY2ViZXI7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0ZVNwZWNpZmljVG90YWxzID0gQXJyYXkuZnJvbShnbG9iYWxEYXRlVG90YWxzLmVudHJpZXMoKSlcclxuICAgICAgLm1hcCgoW2RheSx0b3RhbF0pID0+ICh7IGRheSwgdG90YWwgfSkpXHJcbiAgICAgIC5zb3J0KChhLGIpID0+IHtcclxuICAgICAgICBjb25zdCBwYSA9IGEuZGF5LnNwbGl0KCcvJyk7XHJcbiAgICAgICAgY29uc3QgcGIgPSBiLmRheS5zcGxpdCgnLycpO1xyXG4gICAgICAgIGNvbnN0IGRhID0gbmV3IERhdGUocGFyc2VJbnQocGFbMl0pLCBwYXJzZUludChwYVsxXSktMSwgcGFyc2VJbnQocGFbMF0pKTtcclxuICAgICAgICBjb25zdCBkYiA9IG5ldyBEYXRlKHBhcnNlSW50KHBiWzJdKSwgcGFyc2VJbnQocGJbMV0pLTEsIHBhcnNlSW50KHBiWzBdKSk7XHJcbiAgICAgICAgcmV0dXJuIGRhLmdldFRpbWUoKSAtIGRiLmdldFRpbWUoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgY29uc3Qgc3VtbWFyeURhdGEgPSB7XHJcbiAgICAgIGJyYW5jaGVzLFxyXG4gICAgICBncmFuZFRvdGFsOiBncmFuZFRvdGFsQVBhZ2FyICsgZ3JhbmRUb3RhbEFSZWNlYmVyLFxyXG4gICAgICBncmFuZFRvdGFsQVBhZ2FyLFxyXG4gICAgICBncmFuZFRvdGFsQVJlY2ViZXIsXHJcbiAgICAgIGRhdGVTcGVjaWZpY1RvdGFscyxcclxuICAgICAgZ2VuZXJhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnW1VQTE9BRF0gU2FsdmFuZG8gc3VtbWFyeURhdGEgbm8gc3RvcmFnZTonLCB7XHJcbiAgICAgIGJyYW5jaGVzOiBzdW1tYXJ5RGF0YS5icmFuY2hlcy5sZW5ndGgsXHJcbiAgICAgIGdyYW5kVG90YWw6IHN1bW1hcnlEYXRhLmdyYW5kVG90YWwsXHJcbiAgICAgIGRhdGVTcGVjaWZpY1RvdGFsczogc3VtbWFyeURhdGEuZGF0ZVNwZWNpZmljVG90YWxzLmxlbmd0aFxyXG4gICAgfSk7XHJcblxyXG4gICAgKHN0b3JhZ2UgYXMgYW55KVsnc3VtbWFyeURhdGEnXSA9IHN1bW1hcnlEYXRhO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnW1VQTE9BRF0gRGFkb3Mgc2Fsdm9zIG5vIHN0b3JhZ2U6Jywge1xyXG4gICAgICBicmFuY2hlczogc3VtbWFyeURhdGEuYnJhbmNoZXMubGVuZ3RoLFxyXG4gICAgICBncmFuZFRvdGFsOiBzdW1tYXJ5RGF0YS5ncmFuZFRvdGFsLFxyXG4gICAgICBkYXRlU3BlY2lmaWNUb3RhbHM6IE9iamVjdC5rZXlzKHN1bW1hcnlEYXRhLmRhdGVTcGVjaWZpY1RvdGFscyB8fCB7fSkubGVuZ3RoXHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKCdbVVBMT0FEXSBWZXJpZmljYcOnw6NvIGRlIGRhZG9zIHNhbHZvczonLCAhIShzdG9yYWdlIGFzIGFueSlbJ3N1bW1hcnlEYXRhJ10pO1xyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBgJHtmaWxlcy5sZW5ndGh9IGFycXVpdm8ocykgcHJvY2Vzc2FkbyhzKSBjb20gc3VjZXNzb2AsIGRhdGE6IHN1bW1hcnlEYXRhIH0pO1xyXG4gIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJybyB1cGxvYWQtY3N2LXN1bW1hcnk6JywgZSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Vycm8gaW50ZXJubyBkbyBzZXJ2aWRvcicgfSk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIm11bHRlciIsIlBhcGEiLCJzdG9yYWdlIiwidXBsb2FkIiwibWVtb3J5U3RvcmFnZSIsImxpbWl0cyIsImZpbGVTaXplIiwiZmlsZXMiLCJpc01vbmV0YXJ5VmFsdWUiLCJ2YWwiLCJ0IiwidHJpbSIsInRlc3QiLCJwYXJzZU1vbmV0YXJ5IiwiYyIsInJlcGxhY2UiLCJpbmNsdWRlcyIsInBhcnNlRmxvYXQiLCJydW5NaWRkbGV3YXJlIiwicmVxIiwicmVzIiwiZm4iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlc3VsdCIsIkVycm9yIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsImhhbmRsZXIiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJhcnJheSIsImxlbmd0aCIsImJyYW5jaGVzIiwiZ3JhbmRUb3RhbEFQYWdhciIsImdyYW5kVG90YWxBUmVjZWJlciIsImdsb2JhbERhdGVUb3RhbHMiLCJNYXAiLCJkYXRlUmVnZXgiLCJmaWxlIiwiY29udGVudCIsImJ1ZmZlciIsInRvU3RyaW5nIiwiZGF0YSIsInBhcnNlIiwiaGVhZGVyIiwiZGVsaW1pdGVyIiwic2tpcEVtcHR5TGluZXMiLCJyb3dzIiwiYnJhbmNoTmFtZSIsIm9yaWdpbmFsbmFtZSIsImZpcnN0Q2VsbCIsInRvdGFsQVBhZ2FyIiwidG90YWxBUmVjZWJlciIsImN1cnJlbnRTZWN0aW9uIiwiYnJhbmNoRGF0ZVRvdGFscyIsInJhd1JvdyIsIkFycmF5IiwiaXNBcnJheSIsInJvdyIsInBvcCIsInVwcGVySm9pbiIsIm1hcCIsInRvVXBwZXJDYXNlIiwiam9pbiIsInN0YXJ0c1dpdGgiLCJub3JtYWxpemVkQ2VsbHMiLCJ1cHBlckNlbGxzIiwic29tZSIsIm1vbmV0YXJ5IiwiZmluZCIsImZpbHRlciIsImRhdGVDZWxsIiwidmFsdWVDZWxsIiwidmFsTnVtIiwic2V0IiwiZ2V0Iiwic2l6ZSIsImZyb20iLCJ2YWx1ZXMiLCJyZWR1Y2UiLCJhIiwiYiIsInB1c2giLCJuYW1lIiwidG90YWwiLCJkYXRlU3BlY2lmaWNUb3RhbHMiLCJlbnRyaWVzIiwiZGF5Iiwic29ydCIsInBhIiwic3BsaXQiLCJwYiIsImRhIiwiRGF0ZSIsInBhcnNlSW50IiwiZGIiLCJnZXRUaW1lIiwic3VtbWFyeURhdGEiLCJncmFuZFRvdGFsIiwiZ2VuZXJhdGVkQXQiLCJ0b0lTT1N0cmluZyIsImNvbnNvbGUiLCJsb2ciLCJPYmplY3QiLCJrZXlzIiwiZSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/upload-csv-summary.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-csv-summary&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload-csv-summary.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();